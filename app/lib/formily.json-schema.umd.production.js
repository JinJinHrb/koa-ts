!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("formily.json-schema",["exports"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).Formily=e.Formily||{},e.Formily.JSONSchema={}))}(this,(function(e){"use strict";!function(){const e={NODE_ENV:"production"};try{if(process)return process.env=Object.assign({},process.env),void Object.assign(process.env,e)}catch(e){}globalThis.process={env:e}}();var t=Object.prototype.toString,n=function(e){return function(t){return r(t)==="[object ".concat(e,"]")}},r=function(e){return t.call(e)},i=function(e){return"function"==typeof e},o=Array.isArray,a=n("Object"),s=n("String"),u=n("Boolean"),c=n("Number"),l=function(e){return"object"==typeof e},f=function(e){return o(e)?e:e?[e]:[]};function p(e,t,n){if(o(e)||s(e)){if(n){for(var r=e.length-1;r>=0;r--)if(!1===t(e[r],r))return}else for(r=0;r<e.length;r++)if(!1===t(e[r],r))return}else if(l(e)){var i=void 0;for(i in e)if(Object.hasOwnProperty.call(e,i)&&!1===t(e[i],i))return}}function d(e,t,n,r){var i=n;return p(e,(function(e,n){i=t(i,e,n)}),r),i}var h=function(){try{if("undefined"!=typeof self)return self}catch(e){}try{if("undefined"!=typeof window)return window}catch(e){}try{if("undefined"!=typeof global)return global}catch(e){}return Function("return this")()}(),v=function(e,t){return i(t)?e instanceof t:!!s(t)&&(!!h[t]&&e instanceof h[t])},m=o,y=Object.keys,g=Object.prototype.hasOwnProperty;function b(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r=m(e),i=m(t),o=void 0,a=void 0;if(r&&i){if((n=e.length)!==t.length)return!1;for(o=n;0!=o--;)if(!b(e[o],t[o]))return!1;return!0}if(r!==i)return!1;var s=e&&e._isAMomentObject,u=t&&t._isAMomentObject;if(s!==u)return!1;if(s&&u)return e.isSame(t);var c=e&&e.toJS;if(c!==(t&&t.toJS))return!1;if(c)return e.is?e.is(t):e===t;var l=v(e,"Date"),f=v(t,"Date");if(l!==f)return!1;if(l&&f)return e.getTime()===t.getTime();var p=v(e,"RegExp"),d=v(t,"RegExp");if(p!==d)return!1;if(p&&d)return e.toString()===t.toString();var h=v(e,"URL"),O=v(t,"URL");if(h!==O)return!1;if(h&&O)return e.href===t.href;var _=e&&e.toJSON,x=t&&t.toJSON;if(_!==x)return!1;if(_&&x)return b(e.toJSON(),t.toJSON());var I=y(e);if((n=I.length)!==y(t).length)return!1;for(o=n;0!=o--;)if(!g.call(t,I[o]))return!1;for(o=n;0!=o--;)if(!("_owner"===(a=I[o])&&e.$$typeof||b(e[a],t[a])))return!1;return!0}return e!=e&&t!=t}var O=function(e,t){try{return b(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||-2146828260===e.number)return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}},_=function(e){if(Array.isArray(e)){var t=[];return e.forEach((function(e){t.push(_(e))})),t}if(a(e)){if("$$typeof"in e&&"_owner"in e)return e;if(e._isAMomentObject)return e;if(e._isJSONSchemaObject)return e;if(i(e.toJS))return e.toJS();if(i(e.toJSON))return e.toJSON();var n={};for(var r in e)Object.hasOwnProperty.call(e,r)&&(n[r]=_(e[r]));return n}return e},x=Object.prototype.hasOwnProperty,I=Object.prototype.toString,E=function(e){return void 0===e},S=function(e){return null!=e};function P(e,t){if(void 0===t&&(t=!1),null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return!1;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e)){if(0===e.length)return!0;for(var n=0;n<e.length;n++)if(t){if(void 0!==e[n]&&null!==e[n])return!1}else if(void 0!==e[n]&&null!==e[n]&&""!==e[n]&&0!==e[n])return!1;return!0}if(v(e,"Error"))return""===e.message;if(e.toString===I)switch(e.toString()){case"[object File]":case"[object Map]":case"[object Set]":return 0===e.size;case"[object Object]":for(var r in e)if(x.call(e,r))return!1;return!0}return!1}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var A=function(){return A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},A.apply(this,arguments)};function N(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function T(e){return e.toLowerCase()}var F=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],w=/[^A-Z0-9]+/gi;function M(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce((function(e,t){return e.replace(t,n)}),e)}function k(e,t){var n=e.charAt(0),r=e.substr(1).toLowerCase();return t>0&&n>="0"&&n<="9"?"_"+n+r:""+n.toUpperCase()+r}function L(e,t){return void 0===t&&(t={}),function(e,t){void 0===t&&(t={});for(var n=t.splitRegexp,r=void 0===n?F:n,i=t.stripRegexp,o=void 0===i?w:i,a=t.transform,s=void 0===a?T:a,u=t.delimiter,c=void 0===u?" ":u,l=M(M(e,r,"$1\0$2"),o,"\0"),f=0,p=l.length;"\0"===l.charAt(f);)f++;for(;"\0"===l.charAt(p-1);)p--;return l.slice(f,p).split("\0").map(s).join(c)}(e,A({delimiter:"",transform:k},t))}var D,V="[\ud800-\udbff][\udc00-\udfff]",R=function(e){return"string"==typeof e?e.replace((t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[a-zA-Z\\d]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),new RegExp(t,"g")),""):e;var t},j=function(e){return R(e).replace(t&&t.exact?new RegExp("^".concat(V,"$")):new RegExp(V,"g")," ").length;var t},C=function(){return C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},C.apply(this,arguments)},U=function(e,t){return C({flag:e},t)},q=U("[]"),G=U("[\\d]"),B=U("[[]]"),z=U("()"),$=U("{}"),W=U("{x}"),H=function(){return H=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},H.apply(this,arguments)},J=function(e,t){return H({flag:e},t)},K=J("name",{expectNext:function(e){return this.includesContext(W)?e===K||e===ce||e===ie||e===ne||e===ee:e===Y||e===ce||e===pe||e===ie||e===ue||e===ee||e===fe||e===re}}),Z=J("*",{expectNext:function(e){return e===Y||e===se||e===re||e===pe||e===ce||e===ue}}),Q=J("**",{expectNext:function(e){return e===Y||e===se||e===re||e===pe||e===ce||e===ue}}),Y=J(".",{expectNext:function(e){return e===Y||e===K||e===oe||e===Z||e===Q||e===re||e===te||e===pe},expectPrev:function(e){return e===Y||e===K||e===ae||e===Z||e===ue||e===ie||e===fe||e===ne}}),X=J("!",{expectNext:function(e){return e===K||e===oe}}),ee=J(":",{expectNext:function(e){return this.includesContext(W)?e===K||e===te||e===re:e===K||e===oe||e===ie}}),te=J("{",{expectNext:function(e){return e===K},expectPrev:function(e){return this.includesContext(W)?e===ee||e===ce||e===re:e===Y||e===ee||e===se},updateContext:function(){this.state.context.push($)}}),ne=J("}",{expectNext:function(e){return this.includesContext(W)?e===ce||e===ne||e===pe||e===ie:e===Y||e===pe||e===ce},expectPrev:function(e){return e===K||e===ne||e===ie},updateContext:function(){this.state.context.pop($)}}),re=J("[",{expectNext:function(e){return this.includesContext(W)?e===K||e===re||e===te||e===ie:e===K||e===oe||e===ee||e===re||e===le||e===ie},expectPrev:function(e){return this.includesContext(W)?e===ee||e===ce||e===re:e===Z||e===re||e===Y||e===K||e===se||e==ce},updateContext:function(){this.state.context.push(q)}}),ie=J("]",{expectNext:function(e){return this.includesContext(W)?e===ce||e===ne||e===ie||e===pe:e===Y||e===pe||e===ce||e===ue||e===ie},updateContext:function(){if(!this.includesContext(G)){if(!this.includesContext(q))throw this.unexpect();this.state.context.pop()}}}),oe=J("[[",{updateContext:function(){this.state.context.push(B)}}),ae=J("]]",{updateContext:function(){if(this.curContext()!==B)throw this.unexpect();this.state.context.pop()}}),se=J("(",{expectNext:function(e){return e===K||e===oe||e===te||e===X||e===re},expectPrev:function(e){return e===Z},updateContext:function(){this.state.context.push(z)}}),ue=J(")",{expectNext:function(e){return e===Y||e===pe||e===ce||e===ue},updateContext:function(){if(this.curContext()!==z)throw this.unexpect();this.state.context.pop()}}),ce=J(",",{expectNext:function(e){return e===K||e===oe||e===re||e===te}}),le=J("ignore",{expectNext:function(e){return e===ae},expectPrev:function(e){return e==oe}}),fe=J("expandTok",{expectNext:function(e){return e===Y||e===pe||e===ce||e===ue}}),pe=J("eof"),de=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,he=function(e){return 42===e||46===e||33===e||91===e||93===e||40===e||41===e||44===e||58===e||126===e||123===e||125===e},ve=function(e,t){var n=new Error(e);return Object.assign(n,t),n},me=function(e,t,n){for(var r="",i=t;i<n;i++){var o=e.charAt(i);"\\"!==o&&(r+=o)}return r},ye=function(){function e(e){this.input=e,this.state={context:[],type:null,pos:0},this.type_=null}return e.prototype.curContext=function(){return this.state.context[this.state.context.length-1]},e.prototype.includesContext=function(e){for(var t=this.state.context.length-1;t>=0;t--)if(this.state.context[t]===e)return!0;return!1},e.prototype.unexpect=function(e){return e=e||this.state.type,ve('Unexpect token "'.concat(e.flag,'" in ').concat(this.state.pos," char."),{pos:this.state.pos})},e.prototype.expectNext=function(e,t){if(e&&e.expectNext&&t&&!e.expectNext.call(this,t))throw ve('Unexpect token "'.concat(t.flag,'" token should not be behind "').concat(e.flag,'" token.(').concat(this.state.pos,"th char)"),{pos:this.state.pos})},e.prototype.expectPrev=function(e,t){if(e&&e.expectPrev&&t&&!e.expectPrev.call(this,t))throw ve('Unexpect token "'.concat(e.flag,'" should not be behind "').concat(t.flag,'"(').concat(this.state.pos,"th char)."),{pos:this.state.pos})},e.prototype.match=function(e){return this.state.type===e},e.prototype.skipSpace=function(){if(this.curContext()!==B)e:for(;this.state.pos<this.input.length;){var e=this.input.charCodeAt(this.state.pos);switch(e){case 32:case 160:++this.state.pos;break;case 13:10===this.input.charCodeAt(this.state.pos+1)&&++this.state.pos;case 10:case 8232:case 8233:++this.state.pos;break;default:if(!(e>8&&e<14||e>=5760&&de.test(String.fromCharCode(e))))break e;++this.state.pos}}},e.prototype.next=function(){if(this.type_=this.state.type,this.input.length<=this.state.pos)return this.finishToken(pe);this.skipSpace(),this.readToken(this.getCode(),this.state.pos>0?this.getCode(this.state.pos-1):-1/0)},e.prototype.getCode=function(e){return void 0===e&&(e=this.state.pos),function(e,t){if(String.fromCharCode)return e.codePointAt(t);var n=e.charCodeAt(t);return n<=55295||n>=57344?n:(n<<10)+e.charCodeAt(t+1)-56613888}(this.input,e)},e.prototype.eat=function(e){return!!this.match(e)&&(this.next(),!0)},e.prototype.readKeyWord=function(){for(var e=this.state.pos,t="";;){var n=this.getCode(),r=this.getCode(this.state.pos-1);if(this.input.length===this.state.pos){t=me(this.input,e,this.state.pos+1);break}if(he(n)&&92!==r){t=me(this.input,e,this.state.pos);break}if(32===n||160===n||10===n||8232===n||8233===n){t=me(this.input,e,this.state.pos);break}if(13===n&&10===this.input.charCodeAt(this.state.pos+1)){t=me(this.input,e,this.state.pos);break}if(n>8&&n<14||n>=5760&&de.test(String.fromCharCode(n))){t=me(this.input,e,this.state.pos);break}this.state.pos++}this.finishToken(K,t)},e.prototype.readIngoreString=function(){for(var e,t=this.state.pos,n="";;){var r=this.getCode();if(this.state.pos>=this.input.length)break;if(91!==r&&93!==r||92!==e){if(93==r&&93===e){n=this.input.slice(t,this.state.pos-1).replace(/\\([\[\]])/g,"$1"),this.state.pos++;break}this.state.pos++,e=r}else this.state.pos++,e=""}this.finishToken(le,n),this.finishToken(ae)},e.prototype.finishToken=function(e,t){var n=this.state.type;this.state.type=e,void 0!==t&&(this.state.value=t),this.expectNext(n,e),this.expectPrev(e,n),e.updateContext&&e.updateContext.call(this,n)},e.prototype.readToken=function(e,t){if(92===t)return this.readKeyWord();if(this.input.length<=this.state.pos)this.finishToken(pe);else if(this.curContext()===B)this.readIngoreString();else if(123===e)this.state.pos++,this.finishToken(te);else if(125===e)this.state.pos++,this.finishToken(ne);else if(42===e){if(this.state.pos++,42===this.getCode())return this.state.pos++,this.finishToken(Q);this.finishToken(Z)}else if(33===e)this.state.pos++,this.finishToken(X);else if(46===e)this.state.pos++,this.finishToken(Y);else if(91===e){if(this.state.pos++,91===this.getCode())return this.state.pos++,this.finishToken(oe);this.finishToken(re)}else 126===e?(this.state.pos++,this.finishToken(fe)):93===e?(this.state.pos++,this.finishToken(ie)):40===e?(this.state.pos++,this.finishToken(se)):41===e?(this.state.pos++,this.finishToken(ue)):44===e?(this.state.pos++,this.finishToken(ce)):58===e?(this.state.pos++,this.finishToken(ee)):this.readKeyWord()},e}(),ge=function(e){return function(t){return t&&t.type===e}},be=ge("Identifier"),Oe=ge("IgnoreExpression"),_e=ge("DotOperator"),xe=ge("WildcardOperator"),Ie=ge("ExpandOperator"),Ee=ge("GroupExpression"),Se=ge("RangeExpression"),Pe=ge("DestructorExpression"),Ae=ge("ObjectPattern"),Ne=ge("ArrayPattern"),Te=Object.prototype.toString,Fe=function(e){return function(t){return Te.call(t)==="[object ".concat(e,"]")}},we=Fe("Function"),Me=Array.isArray||Fe("Array"),ke=Fe("String"),Le=Fe("Number"),De=function(e){return"object"==typeof e},Ve=Fe("RegExp"),Re=function(e){return Le(e)||/^(\d+)(\.\d+)?$/.test(e)},je=Me,Ce=Object.keys,Ue=Object.prototype.hasOwnProperty,qe=function(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n=je(e),r=je(t),i=void 0,o=void 0,a=void 0;if(n&&r){if((o=e.length)!==t.length)return!1;for(i=o;0!=i--;)if(!qe(e[i],t[i]))return!1;return!0}if(n!==r)return!1;var s=Ce(e);if((o=s.length)!==Ce(t).length)return!1;for(i=o;0!=i--;)if(!Ue.call(t,s[i]))return!1;for(i=o;0!=i--;)if(a=s[i],!qe(e[a],t[a]))return!1;return!0}return e!=e&&t!=t},Ge=new Map,Be=function(e){return Ge.get(e)},ze=function(e){var t=[];if(Ae(e)){var n=0;return e.properties.forEach((function(e){t[n]={path:[]},t[n].key=e.key.value,t[n].path.push(e.key.value),be(e.value)&&(t[n].key=e.value.value);var r=t[n].path,i=ze(e.value),o=n;i.forEach((function(e){t[o]?(t[o].key=e.key,t[o].path=r.concat(e.path)):t[o]={key:e.key,path:r.concat(e.path)},o++})),o>n?n=o:n++})),t}if(Ne(e)){var r=0;return e.elements.forEach((function(e,n){t[r]={path:[]},t[r].key=n,t[r].path.push(n),be(e)&&(t[r].key=e.value);var i=t[r].path,o=ze(e),a=r;o.forEach((function(e){t[a]?(t[a].key=e.key,t[a].path=i.concat(e.path)):t[a]={key:e.key,path:i.concat(e.path)},a++})),a>r?r=a:r++})),t}return Pe(e)?ze(e.value):t},$e=function(e,t,n,r){t.forEach((function(t){var i=t.key,o=t.path;r.setIn([i],e,r.getIn(o,n))}))},We=function(e,t,n){var r={};return t.length&&Le(t[0].path[0])&&(r=[]),e=null!=e?e:{},t.forEach((function(t){var i=t.key,o=t.path;n.setIn(o,r,e[i])})),r},He=function(e,t,n){t.forEach((function(t){var r=t.key;n.deleteIn([r],e)}))},Je=function(e,t,n,r){return t.every((function(t){var i=t.key;return r.existIn([i],e,n)}))},Ke=(D=function(e,t){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},D(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ze=function(e,t,n){if(Re(e)&&Re(t)){if("+"===n)return String(Number(e)+Number(t));if("-"===n)return String(Number(e)-Number(t));if("*"===n)return String(Number(e)*Number(t));if("/"===n)return String(Number(e)/Number(t))}else{if("+"===n)return String(e)+String(t);if("-"===n)return"NaN";if("*"===n)return"NaN";if("/"===n)return"NaN"}return String(Number(t))},Qe=function(e){function t(t,n){var r=e.call(this,t)||this;return r.isMatchPattern=!1,r.isWildMatchPattern=!1,r.haveExcludePattern=!1,r.haveRelativePattern=!1,r.base=n,r}return Ke(t,e),t.prototype.parse=function(){var e;return this.data={segments:[]},this.eat(pe)||(this.next(),e=this.parseAtom(this.state.type)),this.data.tree=e,e},t.prototype.append=function(e,t){e&&t&&(e.after=t)},t.prototype.parseAtom=function(e){switch(e){case te:case re:return this.includesContext(W)?e===te?this.parseObjectPattern():this.parseArrayPattern():this.parseDestructorExpression();case K:return this.parseIdentifier();case fe:return this.parseExpandOperator();case Q:case Z:return this.parseWildcardOperator();case oe:return this.parseIgnoreExpression();case Y:return this.parseDotOperator()}},t.prototype.pushSegments=function(e){this.data.segments.push(e)},t.prototype.parseIdentifier=function(){var e={type:"Identifier",value:this.state.value},t=!this.includesContext(W)&&!this.isMatchPattern&&!this.isWildMatchPattern;if(this.next(),this.includesContext(G)){if(this.state.type!==ie)throw this.unexpect();this.state.context.pop(),this.next()}else t&&this.pushSegments(e.value);if(this.state.type===re){if(this.next(),this.state.type!==K)throw this.unexpect();this.state.context.push(G);var n=!1;/^\d+$/.test(this.state.value)&&(n=!0);var r=this.state.value;this.pushSegments(n?Number(r):r);var i=this.parseAtom(this.state.type);n&&(i.arrayIndex=!0),this.append(e,i)}else this.append(e,this.parseAtom(this.state.type));return e},t.prototype.parseExpandOperator=function(){var e={type:"ExpandOperator"};return this.isMatchPattern=!0,this.isWildMatchPattern=!0,this.data.segments=[],this.next(),this.append(e,this.parseAtom(this.state.type)),e},t.prototype.parseWildcardOperator=function(){var e={type:"WildcardOperator"};return this.state.type===Q&&(e.optional=!0),this.isMatchPattern=!0,this.isWildMatchPattern=!0,this.data.segments=[],this.next(),this.state.type===se?e.filter=this.parseGroupExpression(e):this.state.type===re&&(e.filter=this.parseRangeExpression(e)),this.append(e,this.parseAtom(this.state.type)),e},t.prototype.parseDestructorExpression=function(){var e=this,t={type:"DestructorExpression"};this.state.context.push(W);var n=this.state.pos-1;t.value=this.state.type===te?this.parseObjectPattern():this.parseArrayPattern();var r,i,o=this.state.pos;return this.state.context.pop(),t.source=this.input.substring(n,o).replace(/\[\s*([\+\-\*\/])?\s*([^,\]\s]*)\s*\]/,(function(t,n,r){return void 0!==e.relative?n?Ze(e.relative,r||1,n):r?Ze(e.relative,r,"+"):String(e.relative):t})).replace(/\s*\.\s*/g,"").replace(/\s*/g,""),void 0===this.relative&&(r=t.source,i=ze(t),Ge.set(r,i)),this.relative=void 0,this.pushSegments(t.source),this.next(),this.append(t,this.parseAtom(this.state.type)),t},t.prototype.parseArrayPattern=function(){var e={type:"ArrayPattern",elements:[]};return this.next(),e.elements=this.parseArrayPatternElements(),e},t.prototype.parseArrayPatternElements=function(){for(var e=[];this.state.type!==ie&&this.state.type!==pe;){if(e.push(this.parseAtom(this.state.type)),this.state.type===ie)return this.includesContext(W)&&this.next(),e;this.next()}return e},t.prototype.parseObjectPattern=function(){var e={type:"ObjectPattern",properties:[]};return this.next(),e.properties=this.parseObjectProperties(),e},t.prototype.parseObjectProperties=function(){for(var e=[];this.state.type!==ne&&this.state.type!==pe;){var t={type:"ObjectPatternProperty",key:this.parseAtom(this.state.type)};if(e.push(t),this.state.type===ee&&(this.next(),t.value=this.parseAtom(this.state.type)),this.state.type===ne)return this.includesContext(W)&&this.next(),e;this.next()}return e},t.prototype.parseDotOperator=function(){var e={type:"DotOperator"};if(!this.type_&&this.base){if(this.base.isMatchPattern)throw new Error("Base path must be an absolute path.");for(this.data.segments=this.base.toArr();this.state.type===Y;)this.relative=this.data.segments.pop(),this.haveRelativePattern=!0,this.next();return function(e,t){void 0===e&&(e=[]);var n=e.length,r=function(i){void 0===i&&(i=0);var o=i<n-1?r(i+1):t,a=o&&{type:"DotOperator",after:o};return{type:"Identifier",value:e[i],after:a}};return r()}(this.data.segments.slice(),this.parseAtom(this.state.type))}return this.next(),this.append(e,this.parseAtom(this.state.type)),e},t.prototype.parseIgnoreExpression=function(){this.next();var e=String(this.state.value).replace(/\s*/g,""),t={type:"IgnoreExpression",value:e};return this.pushSegments(e),this.next(),this.append(t,this.parseAtom(this.state.type)),this.next(),t},t.prototype.parseGroupExpression=function(e){var t={type:"GroupExpression",value:[]};this.isMatchPattern=!0,this.data.segments=[],this.next();e:for(;;)switch(this.state.type){case ce:this.next();break;case X:t.isExclude=!0,this.haveExcludePattern=!0,this.next();break;case pe:case ue:break e;default:t.value.push(this.parseAtom(this.state.type))}return this.next(),this.append(e,this.parseAtom(this.state.type)),t},t.prototype.parseRangeExpression=function(e){var t={type:"RangeExpression"};this.next(),this.isMatchPattern=!0,this.data.segments=[];var n=!1,r=!1;e:for(;;)switch(this.state.type){case ee:r=!0,n=!0,this.next();break;case ie:r||t.end||(t.end=t.start);break e;case ce:throw this.unexpect();case pe:break e;default:n?t.end=this.parseAtom(this.state.type):t.start=this.parseAtom(this.state.type)}return this.next(),this.append(e,this.parseAtom(this.state.type)),t},t}(ye),Ye=function(){function e(e,t){this.tree=e,this.stack=[],this.excluding=!1,this.wildcards=[],this.record=t}return e.prototype.next=function(e,t){var n=t===this.path.length-1;if(e.after)return this.matchNode(e.after,t);if(xe(e)&&!e.filter)return!this.excluding&&(!(0!==t&&!e.optional)||!!this.take(t));if(n)return!!this.take(t);var r=this.wildcards.pop();return!(!r||!r.after)&&this.next(r,t)},e.prototype.shot=function(){var e;(null===(e=this.record)||void 0===e?void 0:e.score)>=0&&this.record.score++},e.prototype.take=function(e){var t;return String(null!==(t=this.path[e])&&void 0!==t?t:"")},e.prototype.matchExcludeIdentifier=function(e,t,n){var r=n===this.path.length-1,i=n<this.path.length;if(t.after||(this.excluding=!1),e){if(t.after)return this.next(t,n);if(r)return!1}return!!r||i},e.prototype.matchIdentifier=function(e,t){var n=this.take(t),r=!1;return Ie(e.after)?(0===n.indexOf(e.value)&&(this.shot(),r=!0),this.excluding?this.matchExcludeIdentifier(r,e.after,t):r&&this.next(e.after,t)):(n===e.value&&(this.shot(),r=!0),this.excluding?this.matchExcludeIdentifier(r,e,t):r&&this.next(e,t))},e.prototype.matchIgnoreExpression=function(e,t){return qe(e.value,this.take(t))&&this.next(e,t)},e.prototype.matchDestructorExpression=function(e,t){return qe(e.source,this.take(t))&&this.next(e,t)},e.prototype.matchExpandOperator=function(e,t){return this.next(e,t)},e.prototype.matchWildcardOperator=function(e,t){var n=!1;return e.filter?(this.stack.push(e),n=this.matchNode(e.filter,t),this.stack.pop()):n=this.next(e,t),n},e.prototype.matchGroupExpression=function(e,t){var n,r=this,i=!1;return e.isExclude&&(i=!this.excluding),(n=e.value,Array.isArray(n)?n:void 0!==n?[n]:[])[i?"every":"some"]((function(e){return r.wildcards=r.stack.slice(),r.excluding=i,r.matchNode(e,t)}))},e.prototype.matchRangeExpression=function(e,t){var n=Number(this.take(t));return e.start?e.end?n>=Number(e.start.value)&&n<=Number(e.end.value):n>=Number(e.start.value):e.end?n<=Number(e.end.value):(this.wildcards=this.stack.slice(),this.next(e,t))},e.prototype.matchNode=function(e,t){return void 0===t&&(t=0),_e(e)?this.next(e,t+1):be(e)?this.matchIdentifier(e,t):Oe(e)?this.matchIgnoreExpression(e,t):Pe(e)?this.matchDestructorExpression(e,t):Ie(e)?this.matchExpandOperator(e,t):xe(e)?this.matchWildcardOperator(e,t):Ee(e)?this.matchGroupExpression(e,t):!!Se(e)&&this.matchRangeExpression(e,t)},e.prototype.match=function(e){return this.path=e,{matched:this.matchNode(this.tree),record:this.record}},e.matchSegments=function(e,t,n){if(e.length!==t.length)return{matched:!1,record:n};var r=function(i){void 0===i&&(i=0);var o,a,s=(o=e[i],a=t[i],(o="symbol"==typeof o?o:"".concat(o))===("symbol"==typeof a?a:"".concat(a)));return(null==n?void 0:n.score)>=0&&n.score++,s&&(!(i<e.length-1)||r(i+1))};return{matched:r(),record:n}},e}(),Xe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},et=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},tt=new Map,nt=Symbol("PATH_MATCHER"),rt=function(e){return null!=e},it=function(e){return"object"==typeof e||"function"==typeof e},ot=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=Be(r);if(i){t=We(t,i,{setIn:at,getIn:ot});break}if(!rt(t)){if(n!==e.length-1)return t;break}t=t[r]}return t},at=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r],o=Be(i);if(o){$e(t,o,n,{setIn:at,getIn:ot});break}if(!rt(t)||!it(t))return;if(Me(t)&&!(ke(a=i)?/^\d+$/.test(a):Le(a)))return;if(!rt(t[i])){if(void 0===n)return void(null===t[i]&&(t[i]=n));r<e.length-1&&(t[i]=Le(e[r+1])?[]:{})}r===e.length-1&&(t[i]=n),t=t[i]}var a},st=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=Be(r);if(i){He(t,i,{setIn:at,getIn:ot,deleteIn:st});break}if(n===e.length-1&&rt(t))return void delete t[r];if(!rt(t)||!it(t))return;if(t=t[r],!De(t))return}},ut=Object.prototype.hasOwnProperty,ct=function(e,t,n){n instanceof pt&&(n=n.length);for(var r=n;r<e.length;r++){var i=e[r],o=Be(i);if(o)return Je(t,o,n,{setIn:at,getIn:ot,deleteIn:st,existIn:ct});if(r===e.length-1)return ut.call(t,i);if(!rt(t)||!it(t))return!1;if(t=t[i],!De(t))return!1}},lt=function(e,t){if(e instanceof pt)return{entire:e.entire,segments:e.segments.slice(),isRegExp:!1,haveRelativePattern:e.haveRelativePattern,isWildMatchPattern:e.isWildMatchPattern,isMatchPattern:e.isMatchPattern,haveExcludePattern:e.haveExcludePattern,tree:e.tree};if(ke(e)){if(!e)return{entire:"",segments:[],isRegExp:!1,isWildMatchPattern:!1,haveExcludePattern:!1,isMatchPattern:!1};if(-1===(o=e).indexOf("*")&&-1===o.indexOf("~")&&-1===o.indexOf("[")&&-1===o.indexOf("]")&&-1===o.indexOf(",")&&-1===o.indexOf(":")&&-1===o.indexOf(" ")&&"."!==o[0])return{entire:e,segments:e.split("."),isRegExp:!1,isWildMatchPattern:!1,haveExcludePattern:!1,isMatchPattern:!1};var n=new Qe(e,pt.parse(t)),r=n.parse();if(n.isMatchPattern)return{entire:e,segments:[],isRegExp:!1,haveRelativePattern:!1,isWildMatchPattern:n.isWildMatchPattern,haveExcludePattern:n.haveExcludePattern,isMatchPattern:!0,tree:r};var i=n.data.segments;return{entire:i.join("."),segments:i,tree:r,isRegExp:!1,haveRelativePattern:n.haveRelativePattern,isWildMatchPattern:!1,haveExcludePattern:!1,isMatchPattern:!1}}return we(e)&&e[nt]?lt(e.path):Me(e)?{entire:e.join("."),segments:e.reduce((function(e,t){return e.concat(ft(t))}),[]),isRegExp:!1,haveRelativePattern:!1,isWildMatchPattern:!1,haveExcludePattern:!1,isMatchPattern:!1}:Ve(e)?{entire:e,segments:[],isRegExp:!0,haveRelativePattern:!1,isWildMatchPattern:!1,haveExcludePattern:!1,isMatchPattern:!0}:{entire:"",isRegExp:!1,segments:void 0!==e?[e]:[],haveRelativePattern:!1,isWildMatchPattern:!1,haveExcludePattern:!1,isMatchPattern:!1};var o},ft=function(e){if(ke(e)){e=e.replace(/\s*/g,"");try{var t=lt(e),n=t.segments;return t.isMatchPattern?e:n}catch(t){return e}}else if(e instanceof pt)return e.segments;return e},pt=function(){function e(t,n){var r=this;this.concat=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(r.isMatchPattern||r.isRegExp)throw new Error("".concat(r.entire," cannot be concat"));var o=new e("");return o.segments=(t=r.segments).concat.apply(t,et([],Xe(n.map((function(e){return ft(e)}))),!1)),o.entire=o.segments.join("."),o},this.slice=function(t,n){if(r.isMatchPattern||r.isRegExp)throw new Error("".concat(r.entire," cannot be slice"));var i=new e("");return i.segments=r.segments.slice(t,n),i.entire=i.segments.join("."),i},this.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.concat.apply(r,et([],Xe(e),!1))},this.pop=function(){if(r.isMatchPattern||r.isRegExp)throw new Error("".concat(r.entire," cannot be pop"));return new e(r.segments.slice(0,r.segments.length-1))},this.splice=function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(r.isMatchPattern||r.isRegExp)throw new Error("".concat(r.entire," cannot be splice"));i=i.reduce((function(e,t){return e.concat(ft(t))}),[]);var a=r.segments.slice();return a.splice.apply(a,et([t,n],Xe(i),!1)),new e(a)},this.forEach=function(e){if(r.isMatchPattern||r.isRegExp)throw new Error("".concat(r.entire," cannot be each"));r.segments.forEach(e)},this.map=function(e){if(r.isMatchPattern||r.isRegExp)throw new Error("".concat(r.entire," cannot be map"));return r.segments.map(e)},this.reduce=function(e,t){if(r.isMatchPattern||r.isRegExp)throw new Error("".concat(r.entire," cannot be reduce"));return r.segments.reduce(e,t)},this.parent=function(){return r.slice(0,r.length-1)},this.includes=function(t){var n=e.parse(t),i=n.entire,o=n.segments,a=n.isMatchPattern,s=r.includesCache.get(i);if(void 0!==s)return s;var u=function(e){return r.includesCache.set(i,e),e};if(r.isMatchPattern){if(a)throw new Error("".concat(r.entire," cannot be used to match ").concat(i));return u(r.match(o))}if(a)throw new Error("".concat(r.entire," cannot be used to match ").concat(i));if(o.length>r.segments.length)return u(!1);for(var c=0;c<o.length;c++)if(!qe(String(o[c]),String(r.segments[c])))return u(!1);return u(!0)},this.transform=function(e,t){if(!we(t))return"";if(r.isMatchPattern)throw new Error("".concat(r.entire," cannot be transformed"));var n=r.segments.reduce((function(t,n){return new RegExp(e).test(n)?t.concat(n):t}),[]);return t.apply(void 0,et([],Xe(n),!1))},this.match=function(t){var n,i,o=e.parse(t),a=r.matchCache.get(o.entire);if(void 0!==a)return a.record&&void 0!==a.record.score&&(r.matchScore=a.record.score),a.matched;var s=function(e){return r.matchCache.set(o.entire,e),e};if(o.isMatchPattern){if(r.isMatchPattern)throw new Error("".concat(o.entire," cannot match ").concat(r.entire));return r.matchScore=0,s(o.match(r.segments))}if(r.isMatchPattern){if(r.isRegExp)try{return null===(i=null===(n=r.entire)||void 0===n?void 0:n.test)||void 0===i?void 0:i.call(n,o.entire)}finally{r.entire.lastIndex=0}var u={score:0},c=s(new Ye(r.tree,u).match(o.segments));return r.matchScore=u.score,c.matched}u={score:0},c=s(Ye.matchSegments(r.segments,o.segments,u));return r.matchScore=u.score,c.matched},this.matchAliasGroup=function(t,n){var i=e.parse(t),o=e.parse(n),a=r.match(i),s=r.matchScore,u=r.match(o),c=r.matchScore;return r.haveExcludePattern?s>=c?a:u:a||u},this.existIn=function(e,t){return void 0===t&&(t=0),ct(r.segments,e,t)},this.getIn=function(e){return ot(r.segments,e)},this.setIn=function(e,t){return at(r.segments,e,t),e},this.deleteIn=function(e){return st(r.segments,e),e},this.ensureIn=function(e,t){var n=r.getIn(e);return void 0===n?(r.setIn(e,t),r.getIn(e)):n};var i=lt(t,n),o=i.tree,a=i.segments,s=i.entire,u=i.isRegExp,c=i.isMatchPattern,l=i.isWildMatchPattern,f=i.haveRelativePattern,p=i.haveExcludePattern;this.entire=s,this.segments=a,this.isMatchPattern=c,this.isWildMatchPattern=l,this.haveRelativePattern=f,this.isRegExp=u,this.haveExcludePattern=p,this.tree=o,this.matchCache=new Map,this.includesCache=new Map}return e.prototype.toString=function(){var e;return null===(e=this.entire)||void 0===e?void 0:e.toString()},e.prototype.toArr=function(){var e;return null===(e=this.segments)||void 0===e?void 0:e.slice()},Object.defineProperty(e.prototype,"length",{get:function(){return this.segments.length},enumerable:!1,configurable:!0}),e.match=function(t){var n=e.parse(t),r=function(e){return n.match(e)};return r[nt]=!0,r.path=n,r},e.isPathPattern=function(e){return!!(ke(e)||Me(e)||Ve(e)||we(e)&&e[nt])},e.transform=function(t,n,r){return e.parse(t).transform(n,r)},e.parse=function(t,n){if(void 0===t&&(t=""),t instanceof e)return tt.get(t.entire)||(tt.set(t.entire,t),t);if(t&&t[nt])return e.parse(t.path);var r=n?e.parse(n):"",i="".concat(t,":").concat(r);return tt.get(i)||(t=new e(t,n),tt.set(i,t),t)},e.getIn=function(t,n){return e.parse(n).getIn(t)},e.setIn=function(t,n,r){return e.parse(n).setIn(t,r)},e.deleteIn=function(t,n){return e.parse(n).deleteIn(t)},e.existIn=function(t,n,r){return e.parse(n).existIn(t,r)},e.ensureIn=function(t,n,r){return e.parse(n).ensureIn(t,r)},e}(),dt=function(){var e=this;this.subscribers={index:0},this.subscribe=function(t){if(i(t)){var n=e.subscribers.index+1;return e.subscribers[n]=t,e.subscribers.index++,n}},this.unsubscribe=function(t){e.subscribers[t]?delete e.subscribers[t]:t||(e.subscribers={index:0})},this.notify=function(t,n){e.subscription&&e.subscription&&i(e.subscription.notify)&&!1===e.subscription.notify.call(e,t)||n||p(e.subscribers,(function(n){i(n)&&n(function(t){return e.subscription&&i(e.subscription.filter)?e.subscription.filter.call(e,t):t}(t))}))}};function ht(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){if("$$typeof"in e&&"_owner"in e)return!0;if(e._isAMomentObject)return!0;if(e._isJSONSchemaObject)return!0;if(i(e.toJS))return!0;if(i(e.toJSON))return!0;return!a(e)}(e)}function vt(e,t){return!1!==t.clone&&t.isMergeableObject(e)?Ot((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function mt(e,t,n){return e.concat(t).map((function(e){return vt(e,n)}))}function yt(e){return S(e)?Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e)):[]}function gt(e,t){try{return t in e}catch(e){return!1}}function bt(e,t,n){var r=n.assign&&e||{};return n.isMergeableObject(e)?(n.assign||yt(e).forEach((function(t){r[t]=vt(e[t],n)})),yt(t).forEach((function(i){(function(e,t){return gt(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(P(e[i])?r[i]=t[i]:gt(e,i)&&n.isMergeableObject(t[i])?r[i]=function(e,t){if(!t.customMerge)return Ot;var n=t.customMerge(e);return"function"==typeof n?n:Ot}(i,n)(e[i],t[i],n):r[i]=vt(t[i],n))})),r):e}function Ot(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||mt,n.isMergeableObject=n.isMergeableObject||ht,n.cloneUnlessOtherwiseSpecified=vt;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):bt(e,t,n):vt(t,n)}for(var _t=function(e,t){return S(t)?S(e)?"object"!=typeof e?t:"object"!=typeof t?e:new Proxy({},{get:function(n,r){return r in t?t[r]:e[r]},ownKeys:function(){var n=Object.keys(e);for(var r in t)r in e||n.push(r);return n},getOwnPropertyDescriptor:function(){return{enumerable:!0,configurable:!0,writable:!1}},has:function(n,r){return r in t||r in e}}):t:e},xt=Ot,It=36,Et="";It--;)Et+=It.toString(36);var St,Pt=Object.prototype.toString,At=function(e){return e&&e instanceof Map},Nt=function(e){return e&&e instanceof Set},Tt=function(e){return e&&e instanceof WeakMap},Ft=function(e){return e&&e instanceof WeakSet},wt=function(e){return"function"==typeof e},Mt=Array.isArray,kt=function(e){return"[object Object]"===Pt.call(e)},Lt=function(e){return At(e)||Tt(e)||Nt(e)||Ft(e)},Dt=function(e){return kt(e)||Mt(e)},Vt=function(e){return Array.isArray(e)?e:null!=e?[e]:[]},Rt=function(){function e(e){void 0===e&&(e=[]),this.batchDeleting=!1,this.value=e}return e.prototype.add=function(e){this.has(e)||this.value.push(e)},e.prototype.has=function(e){return this.value.indexOf(e)>-1},e.prototype.delete=function(e){if(!this.batchDeleting){var t=this.value.indexOf(e);t>-1&&this.value.splice(t,1)}},e.prototype.forEach=function(e){if(0!==this.value.length)for(var t=0,n=this.value.length;t<n;t++)e(this.value[t])},e.prototype.forEachDelete=function(e){if(0!==this.value.length){this.batchDeleting=!0;for(var t=0;t<this.value.length;t++){var n=this.value[t];this.value.splice(t,1),e(n),t--}this.batchDeleting=!1}},e.prototype.clear=function(){this.value.length=0},e}(),jt=new WeakMap,Ct=new WeakMap,Ut=new WeakMap,qt=new WeakMap,Gt=new WeakMap,Bt=[],zt={value:0},$t={value:0},Wt={value:!1},Ht={value:!1},Jt=new Rt,Kt=new Rt,Zt=new Rt,Qt=Symbol("MakeObservableSymbol"),Yt=new Rt,Xt=Symbol("iteration key"),en=function(e,t){var n=Gt.get(e),r=[];if(n){var i=n.get(t);i&&i.forEach((function(e){-1===r.indexOf(e)&&r.push(e)}))}return r},tn=function(e,t){var n=en(e,t),r=$t.value;$t.value=0;for(var i=0,o=n.length;i<o;i++){var a=n[i];a._isComputed?a._scheduler(a):hn()?Kt.add(a):dn()?Jt.add(a):wt(a._scheduler)?a._scheduler(a):a()}$t.value=r},nn=function(e){var t=e.key,n=e.type,r=e.target;"iterate"===n&&(t=Xt);var i=Bt[Bt.length-1];vn()||i&&(Ht.value=!0,function(e,t){var n=e._reactionsSet;n?n.add(t):e._reactionsSet=new Rt([t])}(i,function(e,t,n){var r=Gt.get(e);if(r){var i=r.get(t);return i?i.add(n):r.set(t,new Rt([n])),r}var o=new Map([[t,new Rt([n])]]);return Gt.set(e,o),o}(r,t,i)))},rn=function(e){var t=e.key,n=e.type,r=e.target,i=e.oldTarget;if(sn(),function(e){Yt.forEach((function(t){return t(e)}))}(e),"clear"===n?i.forEach((function(e,t){tn(r,t)})):tn(r,t),"add"===n||"delete"===n||"clear"===n){var o=Array.isArray(r)?"length":Xt;tn(r,o)}un()},on=function(e){var t;null===(t=e._reactionsSet)||void 0===t||t.forEach((function(t){t.forEach((function(t){t.delete(e)}))})),Jt.delete(e),Kt.delete(e),delete e._reactionsSet},an=function(e){e._disposed=!0,on(e),function(e){var t;null===(t=e._computesSet)||void 0===t||t.forEach((function(e){0===en(e._context,e._property).length&&(an(e),e._dirty=!0)}))}(e)},sn=function(){zt.value++},un=function(){if(zt.value--,0===zt.value){var e=$t.value;$t.value=0,mn(),yn(),$t.value=e}},cn=function(){Wt.value=!0},ln=function(){var e=$t.value;Wt.value=!1,$t.value=0,Kt.forEachDelete((function(e){wt(e._scheduler)?e._scheduler(e):e()})),$t.value=e},fn=function(){$t.value++},pn=function(){$t.value--},dn=function(){return zt.value>0},hn=function(){return Wt.value},vn=function(){return $t.value>0},mn=function(){Jt.forEachDelete((function(e){wt(e._scheduler)?e._scheduler(e):e()}))},yn=function(){Zt.forEachDelete((function(e){e()}))},gn=function(e,t){return e!==t&&(e.length!==t.length||!!e.some((function(e,n){return e!==t[n]})))},bn=function(e,t){this.key=e.key,this.type=e.type,this.object=e.target,this.value=e.value,this.oldValue=e.oldValue,this.path=t.path.concat(e.key)},On=function(){function e(e,t,n){this.target=e,this.key=t,this.value=n}return Object.defineProperty(e.prototype,"path",{get:function(){return this.parent?this.parent.path.concat(this.key):this.key?[this.key]:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetRaw",{get:function(){return jt.get(this.target)||this.target},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){if(this.target)return _n(this.targetRaw)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.key?e.targetRaw===this.targetRaw&&e.key===this.key:e.value===this.value},e.prototype.contains=function(e){if(e===this)return!0;for(var t=e.parent;t;){if(this.isEqual(t))return!0;t=t.parent}return!1},e}(),_n=function(e){return qt.get(e)},xn=function(e,t,n){var r=jt.get(n)||n,i=_n(r);if(i)return i;!function(e,t){qt.set(e,t)}(r,new On(e,t,n))},In=Symbol("RAW_TYPE"),En=Symbol("OBSERVABLE_TYPE"),Sn=Object.prototype.hasOwnProperty,Pn=function(e){return jt.has(e)},An=function(e){return e&&!!e[Qt]},Nn=function(e){return null!=e&&(!!Mt(e)||(kt(e)?!e[In]&&(!!e[En]||(!("$$typeof"in e)||!("_owner"in e))&&(!e._isAMomentObject&&(!e._isJSONSchemaObject&&(!wt(e.toJS)&&!wt(e.toJSON))))):!!(At(e)||Tt(e)||Nt(e)||Ft(e))))},Tn=function(e){var t=new WeakSet,n=function(e){if(t.has(e))return e;if(e&&e[In])return e;if(Mt(e)){if(Pn(e)){t.add(e);var r=[];return e.forEach((function(e){r.push(n(e))})),t.delete(e),r}}else if(kt(e)&&Pn(e)){t.add(e);var i={};for(var o in e)Sn.call(e,o)&&(i[o]=n(e[o]));return t.delete(e),i}return e};return n(e)},Fn=function(e,t){var n=jt.get(e)||e,r=jt.get(t)||t;if(n===r)return!0;var i=_n(n),o=_n(r);return!!i&&(!!o&&i.contains(o))},wn=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Mn=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},kn=new Set(Object.getOwnPropertyNames(Symbol).map((function(e){return Symbol[e]})).filter((function(e){return"symbol"==typeof e}))),Ln=Object.prototype.hasOwnProperty;function Dn(e,t,n){var r=Ct.get(n);return r||(!Pn(n)&&Nn(n)?Gn(e,t,n):n)}function Vn(e,t,n,r){var i=n.next;return n.next=function(){var o=i.call(n),a=o.done,s=o.value;return a||(r?s[1]=Dn(e,t,s[1]):s=Dn(e,t,s)),{done:a,value:s}},n}var Rn=(St={has:function(e){var t=jt.get(this),n=Reflect.getPrototypeOf(this);return nn({target:t,key:e,type:"has"}),n.has.apply(t,arguments)},get:function(e){var t=jt.get(this),n=Reflect.getPrototypeOf(this);return nn({target:t,key:e,type:"get"}),Dn(t,e,n.get.apply(t,arguments))},add:function(e){var t=jt.get(this),n=Reflect.getPrototypeOf(this),r=n.has.call(t,e),i=n.add.apply(t,arguments);return r||rn({target:t,key:e,value:e,type:"add"}),i},set:function(e,t){var n=jt.get(this),r=Reflect.getPrototypeOf(this),i=r.has.call(n,e),o=r.get.call(n,e),a=r.set.apply(n,arguments);return i?t!==o&&rn({target:n,key:e,value:t,oldValue:o,type:"set"}):rn({target:n,key:e,value:t,type:"add"}),a},delete:function(e){var t=jt.get(this),n=Reflect.getPrototypeOf(this),r=n.has.call(t,e),i=n.get?n.get.call(t,e):void 0,o=n.delete.apply(t,arguments);return r&&rn({target:t,key:e,oldValue:i,type:"delete"}),o},clear:function(){var e=jt.get(this),t=Reflect.getPrototypeOf(this),n=0!==e.size,r=e instanceof Map?new Map(e):new Set(e),i=t.clear.apply(e,arguments);return n&&rn({target:e,oldTarget:r,type:"clear"}),i},forEach:function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=jt.get(this),o=Reflect.getPrototypeOf(this);nn({target:i,type:"iterate"});var a=function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return e.apply(void 0,Mn([Dn(i,n,t),n],wn(r),!1))};return(t=o.forEach).call.apply(t,Mn([i,a],wn(n),!1))},keys:function(){var e=jt.get(this),t=Reflect.getPrototypeOf(this);return nn({target:e,type:"iterate"}),t.keys.apply(e,arguments)},values:function(){var e=jt.get(this),t=Reflect.getPrototypeOf(this);nn({target:e,type:"iterate"});var n=t.values.apply(e,arguments);return Vn(e,"",n,!1)},entries:function(){var e=jt.get(this),t=Reflect.getPrototypeOf(this);nn({target:e,type:"iterate"});var n=t.entries.apply(e,arguments);return Vn(e,"",n,!0)}},St[Symbol.iterator]=function(){var e=jt.get(this),t=Reflect.getPrototypeOf(this);nn({target:e,type:"iterate"});var n=t[Symbol.iterator].apply(e,arguments);return Vn(e,"",n,e instanceof Map)},Object.defineProperty(St,"size",{get:function(){var e=jt.get(this),t=Reflect.getPrototypeOf(this);return nn({target:e,type:"iterate"}),Reflect.get(t,"size",e)},enumerable:!1,configurable:!0}),St),jn={get:function(e,t,n){return e=Ln.call(Rn,t)?Rn:e,Reflect.get(e,t,n)}},Cn={get:function(e,t,n){if(t){var r=e[t];if("symbol"==typeof t&&kn.has(t))return r;nn({target:e,key:t,receiver:n,type:"get"});var i=Ct.get(r);if(i)return i;if(!Pn(r)&&Nn(r)){var o=Reflect.getOwnPropertyDescriptor(e,t);if(!o||!1!==o.writable||!1!==o.configurable)return Gn(e,t,r)}return r}},has:function(e,t){var n=Reflect.has(e,t);return nn({target:e,key:t,type:"has"}),n},ownKeys:function(e){var t=Reflect.ownKeys(e);return nn({target:e,type:"iterate"}),t},set:function(e,t,n,r){var i=Ln.call(e,t),o=Gn(e,t,n),a=e[t];return e[t]=o,i?n!==a&&rn({target:e,key:t,value:o,oldValue:a,receiver:r,type:"set"}):rn({target:e,key:t,value:o,oldValue:a,receiver:r,type:"add"}),!0},deleteProperty:function(e,t){var n=e[t];return delete e[t],rn({target:e,key:t,oldValue:n,type:"delete"}),!0}},Un=function(e,t){var n=new Proxy(e,Cn);return jt.set(n,e),t?Ut.set(e,n):Ct.set(e,n),n},qn=function(e,t){var n=new Proxy(e,jn);return jt.set(n,e),t?Ut.set(e,n):Ct.set(e,n),n},Gn=function(e,t,n,r){if("object"!=typeof n)return n;var i=jt.get(n);if(i){var o=_n(i);return o.target||(o.target=e),o.key=t,n}if(!Nn(n))return n;if(e){var a=jt.get(e)||e;if(Ut.get(a))return n}return xn(e,t,n),r?function(e){return Dt(e)?Un(e,!0):Lt(e)?qn(e,!0):e}(n):Dt(n)?Un(n):Lt(n)?qn(n):n},Bn=function(e){var t=function(t){return e({value:t})};return wt(e)&&(t[Qt]=e),t},zn=function(e){if(e[Qt])return e[Qt][Qt]?zn(e[Qt]):e[Qt]},$n=function(e,t){function n(n){var r;try{e(),wt(n)&&(r=n())}finally{t()}return r}return n.bound=Wn(n),n},Wn=function(e){return function(t,n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e((function(){return t.apply(n,r)}))}}},Hn=function(e,t){var n=$n(e,t),r=Bn((function(e){var t=e.target,r=e.key;return t[r]=n.bound(t[r],t),t}));return n[Qt]=r,n.bound[Qt]=r,n},Jn=Hn(sn,un);Jn.scope=Hn(cn,ln),Jn.endpoint=function(e){wt(e)&&(0===zt.value?e():Zt.add(e))};var Kn=Hn((function(){sn(),fn()}),(function(){pn(),un()}));Kn.scope=Hn((function(){cn(),fn()}),(function(){pn(),ln()}));var Zn=$n(fn,pn),Qn=Bn((function(e){var t=e.target,n=e.key,r=e.value,i={value:Gn(t,n,t?t[n]:r)};return t?(Object.defineProperty(t,n,{set:function(e){var r=i.value;e=Gn(t,n,e),i.value=e,r!==e&&rn({target:t,key:n,type:"set",oldValue:r,value:e})},get:function(){return nn({target:t,key:n,type:"get"}),i.value},enumerable:!0,configurable:!1}),t):i.value})),Yn=Bn((function(e){var t=e.target,n=e.key,r=e.value,i={value:t?t[n]:r},o={set:function(e){var t=i.value;i.value=e,t!==e&&rn({target:i,key:n,type:"set",oldValue:t,value:e})},get:function(){return nn({target:i,key:n,type:"get"}),i.value}};return jt.set(o,i),Ct.set(i,o),xn(t,n,i),t?(Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!1,writable:!1}),t):o})),Xn=Bn((function(e){var t=e.target,n=e.key,r=e.value,i={value:t?t[n]:r},o={},a=t||i,s=t?n:"value";function u(){return nn({target:a,key:s,type:"get"}),i.value}function c(e){var t=i.value;i.value=e,t!==e&&rn({target:a,key:s,type:"set",oldValue:t,value:e})}return t?(Object.defineProperty(t,n,{get:u,set:c,enumerable:!0}),t):(Object.defineProperty(o,"value",{set:c,get:u}),xn(t,n,i),jt.set(o,i),Ct.set(i,o),o)})),er=Bn((function(e){var t=e.target,n=e.key,r=e.value,i={value:Gn(t,n,t?t[n]:r,!0)};return t?(Object.defineProperty(t,n,{set:function(e){var r=i.value;e=Gn(t,n,e,!0),i.value=e,r!==e&&rn({target:t,key:n,type:"set",oldValue:r,value:e})},get:function(){return nn({target:t,key:n,type:"get"}),i.value},enumerable:!0,configurable:!1}),t):i.value})),tr=Object.getOwnPropertyDescriptor,nr=Object.getPrototypeOf,rr=new WeakMap;function ir(e,t){if(e)return tr(e,t)||ir(nr(e),t)}function or(e,t,n){if(!e)return n?wt(n)?{get:n}:n:{};var r=function(e,t){var n=e.constructor;if(n===Object||n===Array)return ir(e,t);var r=rr.get(n)||{},i=r[t];if(i)return i;var o=ir(e,t);return rr.set(n,r),r[t]=o,o}(e,t);return r||{}}var ar=Bn((function(e){var t=e.target,n=e.key,r=e.value,i={},o={},a=t||i,s=t?n:"value",u=or(t,s,r);function c(){var e;i.value=null===(e=u.get)||void 0===e?void 0:e.call(a)}function l(){if(-1===Bt.indexOf(l)){on(l);try{Bt.push(l),c()}finally{Bt.pop()}}}function f(){return Bt.length>0&&function(e){if(wt(e)){var t=Bt[Bt.length-1];if(t){var n=t._computesSet;n?n.add(e):t._computesSet=new Rt([e])}}}(l),vn()?c():l._dirty&&(l(),l._dirty=!1),nn({target:a,key:s,type:"get"}),i.value}function p(e){var t;try{sn(),null===(t=u.set)||void 0===t||t.call(a,e)}finally{un()}}return l._name="ComputedReaction",l._scheduler=function(){l._dirty=!0,rn({target:a,key:s,value:i.value,type:"set"})},l._isComputed=!0,l._dirty=!0,l._context=a,l._property=s,t?(Object.defineProperty(t,n,{get:f,set:p,enumerable:!0}),t):(Object.defineProperty(o,"value",{set:p,get:f}),xn(t,n,i),jt.set(o,i),Ct.set(i,o),o)}));function sr(e){return Gn(null,null,e)}function ur(e,t){if(Pn(e))return e;if(!Nn(e))return e;for(var n in xn(void 0,void 0,e),jt.set(e,e),Ct.set(e,e),t){var r=t[n];An(r)&&zn(r)({target:e,key:n})}return e}sr.box=Yn,sr.ref=Xn,sr.deep=Qn,sr.shallow=er,sr.computed=ar,sr[Qt]=Qn;var cr=function(){return cr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},cr.apply(this,arguments)},lr=function(e,t){void 0===t&&(t="AutoRun");var n=function(){if(wt(e)&&!(n._boundary>0)&&-1===Bt.indexOf(n)){on(n);try{sn(),Bt.push(n),e()}finally{Bt.pop(),n._boundary++,un(),n._boundary=0,n._memos.cursor=0,n._effects.cursor=0}}},r=function(){n._memos={queue:[],cursor:0},n._effects={queue:[],cursor:0}};return n._boundary=0,n._name=t,r(),n(),function(){an(n),function(e){if(e._effects)try{sn(),e._effects.queue.forEach((function(e){e&&e.dispose&&e.dispose()}))}finally{un()}}(n),r()}};lr.memo=function(e,t){if(wt(e)){var n=Bt[Bt.length-1];if(!n||!n._memos)throw new Error("autorun.memo must used in autorun function body.");var r=Vt(t||[]),i=n._memos.cursor++,o=n._memos.queue[i];if(!o||gn(r,o.deps)){var a=e();return n._memos.queue[i]={value:a,deps:r},a}return o.value}},lr.effect=function(e,t){if(wt(e)){var n=Bt[Bt.length-1];if(!n||!n._effects)throw new Error("autorun.effect must used in autorun function body.");var r=n._effects,i=Vt(t||[{}]),o=r.cursor++,a=r.queue[o];a&&!gn(i,a.deps)||(Promise.resolve(0).then((function(){if(!n._disposed){var t=e();wt(t)&&(r.queue[o].dispose=t)}})),r.queue[o]={deps:i})}};var fr,pr=function(e,t,n){var r=cr({name:"Reaction"},n),i={},o=function(){try{sn(),wt(t)&&t(i.currentValue,i.oldValue)}finally{un()}},a=function(){if(-1===Bt.indexOf(a)){on(a);try{Bt.push(a),i.currentValue=e()}finally{Bt.pop()}}};return a._scheduler=function(e){e(),(wt(r.equals)?r.equals(i.oldValue,i.currentValue):i.oldValue===i.currentValue)||o(),i.oldValue=i.currentValue},a._name=r.name,a(),i.oldValue=i.currentValue,r.fireImmediately&&o(),function(){an(a)}},dr=Symbol.for("__REVA_ACTIONS"),hr={parent:!0,root:!0,properties:!0,patternProperties:!0,additionalProperties:!0,items:!0,additionalItems:!0,"x-linkages":!0,"x-reactions":!0},vr={title:"title",description:"description",default:"initialValue",enum:"dataSource",readOnly:"readOnly",writeOnly:"editable","x-content":"content","x-data":"data","x-value":"value","x-editable":"editable","x-disabled":"disabled","x-read-pretty":"readPretty","x-read-only":"readOnly","x-visible":"visible","x-hidden":"hidden","x-display":"display","x-pattern":"pattern","x-validator":"validator","x-decorator":"decoratorType","x-component":"componentType","x-decorator-props":"decoratorProps","x-component-props":"componentProps"},mr={required:!0,format:!0,maxItems:!0,minItems:!0,maxLength:!0,minLength:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,pattern:!0,const:!0,multipleOf:!0,maxProperties:!0,minProperties:!0,uniqueItems:!0},yr=Object.prototype.hasOwnProperty,gr=function(e){return"$$typeof"in e&&"_owner"in e||(!!e._isAMomentObject||(!!aa.isSchemaInstance(e)||(!!e[dr]||(!!i(e.toJS)||(!!i(e.toJSON)||!!Pn(e))))))},br=function(e,t,n){Zn((function(){var r,i=pt.parse(t).segments,a=i[0],s="enum"===a&&o(n),u=vr[a];u?pt.setIn(e,[u].concat(i.slice(1)),s?f(n).map((function(e){return"object"==typeof e?e:{label:e,value:e}})):n):mr[a]&&(null===(r=e.setValidatorRule)||void 0===r||r.call(e,a,n))}))},Or=/^\s*\{\{([\s\S]*)\}\}\s*$/,_r={silent:!1,compile:function(e,t){if(void 0===t&&(t={}),!_r.silent)return new Function("$root","with($root) { return (".concat(e,"); }"))(t);try{return new Function("$root","with($root) { return (".concat(e,"); }"))(t)}catch(e){}}},xr=function(e){void 0===e&&(e=!0),_r.silent=!!e},Ir=function(e){i(e)&&(_r.compile=e)},Er=function(e,t){if(s(e)){var n=e.match(Or);return n?_r.compile(n[1],t):e}return e},Sr=function(e,t){var n=[],r=function(e){if(s(e))return Er(e,t);if(o(e))return e.map((function(e){return r(e)}));if(a(e)){if(gr(e))return e;if(n.indexOf(e)>-1)return e;var i=n.length;n.push(e);var u=d(e,(function(e,t,n){return e[n]=r(t),e}),{});return n.splice(i,1),u}return e};return r(e)},Pr=function(e,t,n){!function(e,t){var n=[],r=e,i=function(e,o){if(void 0===o&&(o=[]),a(e)){if(n.indexOf(e)>-1)return;var s=n.length;if(n.push(e),gr(e)&&r!==e)return void t(e,o);p(e,(function(e,t){i(e,o.concat(t))})),n.splice(s,1)}else t(e,o)};i(e)}(t,(function(t,r){var i=pt.parse(r),o=Sr(t,n),a=i.segments[0];void 0!==o&&yr.call(e,a)&&Zn((function(){return pt.setIn(e,i,o)}))}))},Ar=function(e,t,n,r){void 0===r&&(r=!1),function(e,t){void 0!==e["x-validator"]&&t(e["x-validator"],["x-validator"]);var n=[],r=e,o=function(s,u){var c;if(void 0===u&&(u=[]),"x-compile-omitted"!==u[0]&&"x-validator"!==u[0]&&"version"!==u[0]&&"_isJSONSchemaObject"!==u[0]&&!(-1==String(u[0]).indexOf("x-")&&i(s)||hr[u[0]]))if((null===(c=e["x-compile-omitted"])||void 0===c?void 0:c.indexOf(u[0]))>-1)t(s,u,!0);else if(a(s)){if("default"===u[0]||"x-value"===u[0])return void t(s,u);if(n.indexOf(s)>-1)return;var l=n.length;if(n.push(s),gr(s)&&r!==s)return void t(s,u);p(s,(function(e,t){o(e,u.concat(t))})),n.splice(l,1)}else t(s,u)};o(e)}(t,(function(t,i,o){var a,s=t,u=(a=function(){o||(s=Sr(t,n))},Ht.value=!1,null==a||a(),Ht.value);void 0!==s&&(r&&!u&&e.initialized||br(e,i,s))}))},Nr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this;this.buildListener=function(e){return function(t,n){for(var r=this,o=0;o<e.length;o++){var a=e[o];i(a)?a.call(this,t,n):s(a)&&i(e[o+1])?(a===t.type&&e[o+1].call(this,t.payload,n),o++):p(a,(function(e,o){if(i(e)&&s(o)&&o===t.type)return e.call(r,t.payload,n),!1}))}}},this.notify=function(e,t,r){s(e)&&n.listener.call(r,{type:e,payload:t},r)},this.listener=this.buildListener(e)},Tr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fr=function(e){function t(t){var n=void 0===t?{}:t,r=n.lifecycles,i=n.context,a=e.call(this)||this;return a.lifecycles=[],a.outerLifecycles=new Map,a.buildLifeCycles=function(e){return e.reduce((function(e,t){return t instanceof Nr?e.concat(t):o(t)?a.buildLifeCycles(t):"object"==typeof t?(a.context=t,e):e}),[])},a.addLifeCycles=function(e,t){void 0===t&&(t=[]);var n=a.buildLifeCycles(t);n.length&&a.outerLifecycles.set(e,n)},a.hasLifeCycles=function(e){return a.outerLifecycles.has(e)},a.removeLifeCycles=function(e){a.outerLifecycles.delete(e)},a.setLifeCycles=function(e){void 0===e&&(e=[]),a.lifecycles=a.buildLifeCycles(e)},a.publish=function(e,t,n){s(e)&&(a.lifecycles.forEach((function(r){r.notify(e,t,n||a.context)})),a.outerLifecycles.forEach((function(r){r.forEach((function(r){r.notify(e,t,n||a.context)}))})),a.notify({type:e,payload:t}))},a.clear=function(){a.lifecycles=[],a.outerLifecycles.clear(),a.unsubscribe()},a.lifecycles=a.buildLifeCycles(r||[]),a.context=i,a}return Tr(t,e),t}(dt),wr=function(e){return e instanceof To},Mr=function(e){return e instanceof fo||e instanceof Po},kr=function(e){return e instanceof xo},Lr=function(e){return e instanceof Eo},Dr=function(e){return e instanceof Po},Vr=function(e){return function(e){return e instanceof fo}(e)||kr(e)||Lr(e)},Rr=function(e){return e&&e instanceof ao},jr=function(e){var t=this;this.getGraph=function(){var e={};return e[""]=t.form.getState(),p(t.form.fields,(function(t,n){e[n]=t.getState()})),e},this.setGraph=function(e){var n=t.form,r=function(e,n){var r=pt.parse(e),o=r.segments[r.segments.length-1],a=r.parent();return function(e){return!i(null==e?void 0:e.initialize)&&"Field"===(null==e?void 0:e.displayName)}(n)?t.form.createField({name:o,basePath:a}):function(e){return!i(null==e?void 0:e.initialize)&&"ArrayField"===(null==e?void 0:e.displayName)}(n)?t.form.createArrayField({name:o,basePath:a}):function(e){return!i(null==e?void 0:e.initialize)&&"ObjectField"===(null==e?void 0:e.displayName)}(n)?t.form.createObjectField({name:o,basePath:a}):t.form.createVoidField({name:o,basePath:a})};p(e,(function(e,t){if(function(e){return!i(null==e?void 0:e.initialize)&&"Form"===(null==e?void 0:e.displayName)}(e))n.setState(e);else{var o=n.fields[t];o?o.setState(e):r(t,e).setState(e)}}))},this.form=e,ur(this,{setGraph:Jn})},Cr=pt.getIn,Ur=h,qr="en",Gr={locales:{messages:{},language:Ur.navigator&&(Ur.navigator.browserlanguage||Ur.navigator.language)||qr},formats:{},rules:{},template:null},Br=function(e,t){return void 0===t&&(t=Gr.locales.language),Cr(Gr.locales.messages,"".concat(function(e){var t=Gr.locales.language,n=T(e);return Gr.locales.messages[e]?e:(p(Gr.locales.messages,(function(e,r){var i=T(r);if(i.indexOf(n)>-1||n.indexOf(i)>-1)return t=r,!1})),t)}(t),".").concat(e))},zr=function(e){return Br(e)||Br("pattern")||Br("pattern",qr)},$r=function(e,t){var n=e.message;if(s(e.message)){var r=Gr.template;i(r)&&(e.message=r(n,t)),e.message=e.message.replace(/\{\{\s*([\w.]+)\s*\}\}/g,(function(e,n){return pt.getIn(t,n)}))}return e},Wr=function(){return Wr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Wr.apply(this,arguments)},Hr=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Jr=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Kr=function(e){if(!e)return{};var t={};return s(e)?t.format=e:i(e)?t.validator=e:t=Object.assign(t,e),t},Zr=function(e){return e?(o(e)?e:[e]).map((function(e){return Kr(e)})):[]},Qr=function(e){void 0===e&&(e={});var t=function(t,n){return function(r,i){return Hr(void 0,void 0,void 0,(function(){var o,a,s;return Jr(this,(function(c){switch(c.label){case 0:o=function(t,n){return Wr(Wr(Wr({},e),t),{value:n})}(i,r),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,t(r,Wr(Wr({},e),{message:n}),o,(function(e,t){var n;return null===(n=$r({type:"error",message:e},Object.assign(o,t)))||void 0===n?void 0:n.message}))];case 2:return a=c.sent(),u(a)?a?[2,{type:"error",message:void 0}]:[2,$r({type:"error",message:n},o)]:a?(l=a).type&&l.message?[2,$r(a,o)]:[2,$r({type:"error",message:a},o)]:[2,{type:"error",message:void 0}];case 3:return[2,{type:"error",message:(null==(s=c.sent())?void 0:s.message)||s}];case 4:return[2]}var l}))}))}};return function(){var t=[];for(var n in"required"in e&&t.push("required"),e)"required"!==n&&"validator"!==n&&t.push(n);return"validator"in e&&t.push("validator"),t}().reduce((function(n,r){var i,o,a=function(e){return e?Gr.rules[e]:Gr.rules}(r);if(a){var s=t(a,(o=r,(i=e).format?i.message||zr(i.format):i.message||zr(o)));return n.concat(s)}return n}),[])},Yr={url:new RegExp("^(?:(?:(?:https?|ftp|rtmp):)?//)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:22[0-3]|2[01]\\d|[1-9]\\d?|1\\d\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1?\\d{1,2})){2}(?:\\.(?:25[0-4]|2[0-4]\\d|1\\d\\d|[1-9]\\d?))|(?:(?:[a-z\\u00a1-\\uffff0-9_]-*)*[a-z\\u00a1-\\uffff0-9_]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9_]-*)*[a-z\\u00a1-\\uffff0-9_]+)*(?:\\.(?:[a-z\\u00a1-\\uffff_]{2,})))(?::\\d{2,5})?(?:/?\\S*)?$"),email:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,ipv4:/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/,number:/^[+-]?\d+(\.\d+)?$/,integer:/^[+-]?\d+$/,qq:/^(\+?[1-9]\d*|0)$/,phone:/^\d{3}-\d{8}$|^\d{4}-\d{7}$|^\d{11}$/,idcard:/^\d{15}$|^\d{17}(\d|x|X)$/,money:/^([\u0024\u00A2\u00A3\u00A4\u20AC\u00A5\u20B1\u20B9\uFFE5]\s*)(\d+,?)+\.?\d*\s*$/,zh:/^[\u4e00-\u9fa5]+$/,date:/^[0-9]+[./-][0-9]+[./-][0-9]+\s*(?:[0-9]+\s*:\s*[0-9]+\s*:\s*[0-9]+)?$/,zip:/^[0-9]{6}$/},Xr=function(){return Xr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Xr.apply(this,arguments)},ei=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},ti=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ni=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},ri=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},ii=function(e){var t;if(o(e)){for(var n=0;n<e.length;n++)if(S(e[n]))return!1;return!0}return(null==e?void 0:e.getCurrentContent)?!(null===(t=e.getCurrentContent())||void 0===t?void 0:t.hasText()):P(e)},oi=function(e){return s(e)?j(e):e?e.length:0},ai={format:function(e,t){if(ii(e))return"";if(t.format){var n=(r=t.format)?Gr.formats[r]:Gr.formats;if(n)return new RegExp(n).test(e)?"":t.message}var r;return""},required:function(e,t){return!1===t.required?"":ii(e)?t.message:""},max:function(e,t){return ii(e)?"":(c(e)?e:oi(e))>Number(t.max)?t.message:""},min:function(e,t){return ii(e)?"":(c(e)?e:oi(e))<Number(t.min)?t.message:""},exclusiveMaximum:function(e,t){return ii(e)?"":(c(e)?e:oi(e))>=Number(t.exclusiveMaximum)?t.message:""},exclusiveMinimum:function(e,t){return ii(e)?"":(c(e)?e:oi(e))<=Number(t.exclusiveMinimum)?t.message:""},len:function(e,t){return ii(e)?"":oi(e)!==Number(t.len)?t.message:""},pattern:function(e,t){return ii(e)||new RegExp(t.pattern).test(e)?"":t.message},validator:function(e,t,n,r){return ei(this,void 0,void 0,(function(){var o;return ti(this,(function(a){switch(a.label){case 0:return i(t.validator)?[4,Promise.resolve(t.validator(e,t,n,r))]:[3,2];case 1:return o=a.sent(),u(o)?[2,o?"":t.message]:[2,o];case 2:throw new Error("The rule's validator property must be a function.")}}))}))},whitespace:function(e,t){return ii(e)?"":t.whitespace?/^\s+$/.test(e)?t.message:"":void 0},enum:function(e,t){return ii(e)?"":-1===f(t.enum).indexOf(e)?t.message:""},const:function(e,t){return ii(e)?"":t.const!==e?t.message:""},multipleOf:function(e,t){return ii(e)?"":Number(e)%Number(t.multipleOf)!=0?t.message:""},uniqueItems:function(e,t){return ii(e)||(e=f(e)).some((function(t,n){for(var r=0;r<e.length;r++)if(r!==n&&!O(e[r],t))return!1;return!0}))?"":t.message},maxProperties:function(e,t){return ii(e)||Object.keys(e||{}).length<=Number(t.maxProperties)?"":t.message},minProperties:function(e,t){return ii(e)||Object.keys(e||{}).length>=Number(t.minProperties)?"":t.message}};fr=ai,p({maximum:"max",minimum:"min",maxItems:"max",minItems:"min",maxLength:"max",minLength:"min"},(function(e,t){fr[t]=function(n,r){for(var i,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];return fr[e].apply(fr,ri([n,Xr(Xr({},r),(i={},i[e]=r[t],i))],ni(o),!1))}}));var si,ui=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},ci=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};!function(e){p(e,(function(e,t){i(e)&&(Gr.rules[t]=e)}))}(ai),si={en:{pattern:"This field is invalid",invalid:"This field is invalid",required:"The field value is required",number:"The field value is not a number",integer:"The field value is not an integer number",url:"The field value is a invalid url",email:"The field value is not a email format",ipv6:"The field value is not a ipv6 format",ipv4:"The field value is not a ipv4 format",idcard:"The field value is not an idcard format",qq:"The field value is not a qq number format",phone:"The field value is not a phone number format",money:"The field value is not a currency format",zh:"The field value is not a chinese string",date:"The field value is not a valid date format",zip:"The field value is not a zip format",len:"The length or number of entries must be {{len}}",min:"The length or number of entries must be at least {{min}}",minLength:"The length or number of entries must be at least {{minLength}}",minItems:"The length or number of entries must be at least {{minItems}}",maximum:"The field value cannot be greater than {{maximum}}",exclusiveMaximum:"The field value must be less than {{exclusiveMaximum}}",minimum:"The field value cannot be less than {{minimum}}",exclusiveMinimum:"The field value must be greater than {{exclusiveMinimum}}",max:"The field length or number of entries must be at most {{max}}",maxLength:"The field length or number of entries must be at most {{maxLength}}",maxItems:"The field length or number of entries must be at most {{maxItems}}",whitespace:"This field value cannot be blank string.",enum:"The field value must be one of {{enum}}",const:"The field value must be equal to {{const}}",multipleOf:"The field value must be divisible by {{multipleOf}}",maxProperties:"The number of field properties cannot be greater than {{maxProperties}}",minProperties:"The number of field properties cannot be less than {{maxProperties}}",uniqueItems:"Array elements are not unique"},zh:{pattern:"",invalid:"",required:"",number:"",integer:"",url:"url",email:"",ipv6:"ipv6",ipv4:"ipv4",idcard:"",qq:"QQ",phone:"",money:"",zh:"",date:"",zip:"",len:"{{len}}",min:"{{min}}",minLength:"{{minLength}}",minItems:"{{minItems}}",max:"{{max}}",maxLength:"{{maxLength}}",maxItems:"{{maxItems}}",maximum:"{{maximum}}",exclusiveMaximum:"{{exclusiveMaximum}}",minimum:"{{minimum}}",exclusiveMinimum:"{{exclusiveMinimum}}",whitespace:"",enum:"{{enum}}",const:"{{const}}",multipleOf:"{{multipleOf}}",maxProperties:"{{maxProperties}}",minProperties:"{{minProperties}}",uniqueItems:""},"en-US":{pattern:"This field is invalid",invalid:"This field is invalid",required:"The field value is required",number:"The field value is not a number",integer:"The field value is not an integer number",url:"The field value is a invalid url",email:"The field value is not a email format",ipv6:"The field value is not a ipv6 format",ipv4:"The field value is not a ipv4 format",idcard:"The field value is not an idcard format",qq:"The field value is not a qq number format",phone:"The field value is not a phone number format",money:"The field value is not a currency format",zh:"The field value is not a chinese string",date:"The field value is not a valid date format",zip:"The field value is not a zip format",len:"The length or number of entries must be {{len}}",min:"The length or number of entries must be at least {{min}}",minLength:"The length or number of entries must be at least {{minLength}}",minItems:"The length or number of entries must be at least {{minItems}}",maximum:"The field value cannot be greater than {{maximum}}",exclusiveMaximum:"The field value must be less than {{exclusiveMaximum}}",minimum:"The field value cannot be less than {{minimum}}",exclusiveMinimum:"The field value must be greater than {{exclusiveMinimum}}",max:"The field length or number of entries must be at most {{max}}",maxLength:"The field length or number of entries must be at most {{maxLength}}",maxItems:"The field length or number of entries must be at most {{maxItems}}",whitespace:"This field value cannot be blank string.",enum:"The field value must be one of {{enum}}",const:"The field value must be equal to {{const}}",multipleOf:"The field value must be divisible by {{multipleOf}}",maxProperties:"The number of field properties cannot be greater than {{maxProperties}}",minProperties:"The number of field properties cannot be less than {{maxProperties}}",uniqueItems:"Array elements are not unique"},"zh-CN":{pattern:"",invalid:"",required:"",number:"",integer:"",url:"url",email:"",ipv6:"ipv6",ipv4:"ipv4",idcard:"",qq:"QQ",phone:"",money:"",zh:"",date:"",zip:"",len:"{{len}}",min:"{{min}}",minLength:"{{minLength}}",minItems:"{{minItems}}",maxLength:"{{maxLength}}",maxItems:"{{maxItems}}",max:"{{max}}",maximum:"{{maximum}}",exclusiveMaximum:"{{exclusiveMaximum}}",minimum:"{{minimum}}",exclusiveMinimum:"{{exclusiveMinimum}}",whitespace:"",enum:"{{enum}}",const:"{{const}}",multipleOf:"{{multipleOf}}",maxProperties:"{{maxProperties}}",minProperties:"{{minProperties}}",uniqueItems:""},"zh-TW":{pattern:"",invalid:"",required:"",number:"",integer:"",url:"url",email:"",ipv6:"ipv6",ipv4:"ipv4",idcard:"",qq:"QQ",phone:"",money:"",zh:"",date:"",zip:"",len:"{{len}}",min:"{{min}}",minItems:"{{minItems}}",minLength:"{{minLength}}",max:"{{max}}",maxItems:"{{maxItems}}",maxLength:"{{maxLength}}",maximum:"{{maximum}}",exclusiveMaximum:"{{exclusiveMaximum}}",minimum:"{{minimum}}",exclusiveMinimum:"{{exclusiveMinimum}}",whitespace:"",enum:"{{enum}}",const:"{{const}}",multipleOf:"{{multipleOf}}",maxProperties:"{{maxProperties}}",minProperties:"{{minProperties}}",uniqueItems:""},ja:{url:"URL",whitespace:"",zh:"",zip:"zip",date:"",email:"",exclusiveMaximum:"{{exclusiveMaximum}}",exclusiveMinimum:"{{exclusiveMinimum}}",idcard:"ID",integer:"",ipv4:"IPv4",ipv6:"IPv6",len:"{{len}}",max:"{{max}}",maxItems:"{{maxItems}}",maxLength:"{{maxLength}}",maximum:"{{}}",min:"{{min}}",minItems:"{{minItems}}",minLength:"{{minLength}}",minimum:"{{minimum}}",money:"",number:"",pattern:"",invalid:"",phone:"",qq:"qq",required:"",enum:"{{enum}}",cons:"{{const}}",multipleOf:"{{multipleOf}}",maxProperties:"{{maxProperties}}",minProperties:"{{minProperties}}",uniqueItems:""}},Gr.locales.messages=xt(Gr.locales.messages,si),function(e){p(e,(function(e,t){(s(e)||e instanceof RegExp)&&(Gr.formats[t]=new RegExp(e))}))}(Yr);var li,fi=function(e,t,n){return ui(void 0,void 0,void 0,(function(){var r,i,a,s,u,c;return ci(this,(function(l){switch(l.label){case 0:r=function(e,t){return void 0===t&&(t={}),e?(o(e)?e:[e]).reduce((function(e,n){var r,i=Kr(n),o=null!==(r=i.triggerType)&&void 0!==r?r:"onInput";return(null==t?void 0:t.triggerType)&&t.triggerType!==o?e:i?e.concat(Qr(i)):e}),[]):[]}(t,n),i={error:[],success:[],warning:[]},a=0,l.label=1;case 1:return a<r.length?[4,r[a](e,null==n?void 0:n.context)]:[3,4];case 2:if(s=l.sent(),u=s.type,c=s.message,i[u]=i[u]||[],c&&(i[u].push(c),null==n?void 0:n.validateFirst))return[3,4];l.label=3;case 3:return a++,[3,1];case 4:return[2,i]}}))}))};!function(e){e.ON_FORM_INIT="onFormInit",e.ON_FORM_MOUNT="onFormMount",e.ON_FORM_UNMOUNT="onFormUnmount",e.ON_FORM_INPUT_CHANGE="onFormInputChange",e.ON_FORM_VALUES_CHANGE="onFormValuesChange",e.ON_FORM_INITIAL_VALUES_CHANGE="onFormInitialValuesChange",e.ON_FORM_SUBMIT="onFormSubmit",e.ON_FORM_RESET="onFormReset",e.ON_FORM_SUBMIT_START="onFormSubmitStart",e.ON_FORM_SUBMITTING="onFormSubmitting",e.ON_FORM_SUBMIT_END="onFormSubmitEnd",e.ON_FORM_SUBMIT_VALIDATE_START="onFormSubmitValidateStart",e.ON_FORM_SUBMIT_VALIDATE_SUCCESS="onFormSubmitValidateSuccess",e.ON_FORM_SUBMIT_VALIDATE_FAILED="onFormSubmitValidateFailed",e.ON_FORM_SUBMIT_VALIDATE_END="onFormSubmitValidateEnd",e.ON_FORM_SUBMIT_SUCCESS="onFormSubmitSuccess",e.ON_FORM_SUBMIT_FAILED="onFormSubmitFailed",e.ON_FORM_VALIDATE_START="onFormValidateStart",e.ON_FORM_VALIDATING="onFormValidating",e.ON_FORM_VALIDATE_SUCCESS="onFormValidateSuccess",e.ON_FORM_VALIDATE_FAILED="onFormValidateFailed",e.ON_FORM_VALIDATE_END="onFormValidateEnd",e.ON_FORM_GRAPH_CHANGE="onFormGraphChange",e.ON_FORM_LOADING="onFormLoading",e.ON_FIELD_INIT="onFieldInit",e.ON_FIELD_INPUT_VALUE_CHANGE="onFieldInputValueChange",e.ON_FIELD_VALUE_CHANGE="onFieldValueChange",e.ON_FIELD_INITIAL_VALUE_CHANGE="onFieldInitialValueChange",e.ON_FIELD_SUBMIT="onFieldSubmit",e.ON_FIELD_SUBMIT_START="onFieldSubmitStart",e.ON_FIELD_SUBMITTING="onFieldSubmitting",e.ON_FIELD_SUBMIT_END="onFieldSubmitEnd",e.ON_FIELD_SUBMIT_VALIDATE_START="onFieldSubmitValidateStart",e.ON_FIELD_SUBMIT_VALIDATE_SUCCESS="onFieldSubmitValidateSuccess",e.ON_FIELD_SUBMIT_VALIDATE_FAILED="onFieldSubmitValidateFailed",e.ON_FIELD_SUBMIT_VALIDATE_END="onFieldSubmitValidateEnd",e.ON_FIELD_SUBMIT_SUCCESS="onFieldSubmitSuccess",e.ON_FIELD_SUBMIT_FAILED="onFieldSubmitFailed",e.ON_FIELD_VALIDATE_START="onFieldValidateStart",e.ON_FIELD_VALIDATING="onFieldValidating",e.ON_FIELD_VALIDATE_SUCCESS="onFieldValidateSuccess",e.ON_FIELD_VALIDATE_FAILED="onFieldValidateFailed",e.ON_FIELD_VALIDATE_END="onFieldValidateEnd",e.ON_FIELD_LOADING="onFieldLoading",e.ON_FIELD_RESET="onFieldReset",e.ON_FIELD_MOUNT="onFieldMount",e.ON_FIELD_UNMOUNT="onFieldUnmount"}(li||(li={}));var pi,di,hi={form:!0,parent:!0,props:!0,caches:!0,requests:!0,disposers:!0,heart:!0,graph:!0,indexes:!0,fields:!0,lifecycles:!0,componentType:!0,componentProps:!0,decoratorType:!0,decoratorProps:!0},vi={address:!0,path:!0,valid:!0,invalid:!0,selfValid:!0,selfInvalid:!0,errors:!0,successes:!0,warnings:!0,validateStatus:!0},mi="selfDisplay",yi="selfPattern",gi={pattern:yi,editable:yi,readOnly:yi,readPretty:yi,disabled:yi,display:mi,hidden:mi,visible:mi},bi={lifecycles:[],context:[],effectStart:!1,effectEnd:!1,initializing:!1},Oi=/^\.(\d+)/,_i=function(){return _i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_i.apply(this,arguments)},xi=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Ii=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ei=Object.prototype.hasOwnProperty,Si=function(e,t,n){wr(e)?e.notify(t):e.notify(n)},Pi=function(e,t){var n;if(void 0===t&&(t=!0),null==e?void 0:e.target){if("object"==typeof e.target&&("value"in e.target||"checked"in e.target))return!0;t&&(null===(n=e.stopPropagation)||void 0===n||n.call(e))}return!1},Ai=function(e){return e.map((function(e){return(null==e?void 0:e.target)?S(e.target.value)?e.target.value:S(e.target.checked)?e.target.checked:void 0:e}))},Ni=function(e,t){var n=!1,r=t.segments,i=r.reduce((function(t,i,o){var a=t.concat(i),s=r.slice(0,o+1),u=e[s.join(".")];if(n)return Dr(u)||(n=!1),t;if(o>=r.length-1)return a;if(Dr(u)){var l=r.slice(0,o),f=e[l.join(".")];return kr(f)&&function(e){return c(e)||/^\d+$/.test(e)}(i)?(n=!0,a):t}return n=!1,a}),[]);return new pt(i)},Ti=function(e,t){return e.address=pt.parse(t),e.path=function(e){return Ni(e.form.fields,e.address)}(e),e.form.indexes[e.path.toString()]=e.address.toString(),e},Fi=function(e,t){t.forEach((function(t){var n=t.type,r=t.address,i=t.oldAddress,o=t.payload;"remove"===n?wi(e,r,!1):"update"===n&&(o&&(e[r]=o,e[i]===o&&delete e[i]),r&&o&&Ti(o,r))}))},wi=function(e,t,n){void 0===n&&(n=!0);var r=e[t];if(null==r||r.dispose(),Vr(r)&&n){var i=r.form,o=r.path;i.deleteValuesIn(o),i.deleteInitialValuesIn(o)}delete e[t]},Mi=function(e,t){return e.feedbacks.filter((function(n){var r,i,o;return!!(null===(r=n.messages)||void 0===r?void 0:r.length)&&function(e,t){return!(!e||!t||e.type&&e.type!==t.type||e.code&&e.code!==t.code||e.path&&t.path&&!pt.parse(e.path).match(t.path)||e.address&&t.address&&!pt.parse(e.address).match(t.address)||e.triggerType&&e.triggerType!==t.triggerType)}(t,_i(_i({},n),{address:null===(i=e.address)||void 0===i?void 0:i.toString(),path:null===(o=e.path)||void 0===o?void 0:o.toString()}))}))},ki=function(e,t){return e.feedbacks.length?Mi(e,t).reduce((function(e,t){return P(t.messages)?e:e.concat(t.messages)}),[]):[]},Li=function(e,t){return void 0===t&&(t="onInput"),xi(void 0,void 0,void 0,(function(){var n,r;return Ii(this,(function(i){switch(i.label){case 0:return[4,fi(e.value,e.validator,{triggerType:t,validateFirst:null!==(r=e.props.validateFirst)&&void 0!==r?r:e.form.props.validateFirst,context:{field:e,form:e.form}})];case 1:return n=i.sent(),Jn((function(){p(n,(function(n,r){e.setFeedback({triggerType:t,type:r,code:L("validate-".concat(r)),messages:n})}))})),[2,n]}}))}))},Di=function(e,t){var n=_i({startIndex:0,deleteCount:0,insertCount:0},t),r=n.startIndex,i=n.deleteCount,o=n.insertCount,a=e.address.toString(),s=a.length,u=e.form,c=u.fields,l=[],f=o-i;Jn((function(){p(c,(function(e,t){if(function(e){return 0===e.indexOf(a)&&e.length>s}(t)){if(function(e){var t,n=null===(t=e.substring(s).match(Oi))||void 0===t?void 0:t[1];return void 0!==n&&Number(n)>r+i-1}(t)){var n=function(e){var t;if(0===f)return e;var n=e.substring(0,s),r=e.substring(s),i=null===(t=r.match(Oi))||void 0===t?void 0:t[1];if(void 0===i)return e;var o=Number(i)+f;return"".concat(n).concat(r.replace(/^\.\d+/,".".concat(o)))}(t);l.push({type:"update",address:n,oldAddress:t,payload:e})}(function(e){var t,n=null===(t=e.substring(s).match(Oi))||void 0===t?void 0:t[1];if(void 0===n)return!1;var i=Number(n);return i>=r&&i<r+o}(t)||function(e){var t,n=e.substring(0,s),o=e.substring(s),a=null===(t=o.match(Oi))||void 0===t?void 0:t[1];if(void 0===a)return!1;var u=Number(a);return u>r&&!c["".concat(n).concat(o.replace(/^\.\d+/,".".concat(u+i)))]||u===r}(t))&&(Vr(e)&&u.deleteInitialValuesIn(e.path),l.push({type:"remove",address:t}))}})),Fi(c,l)})),e.form.notify(li.ON_FORM_GRAPH_CHANGE)},Vi=function(e,t){var n=_i({fromIndex:0,toIndex:0},t),r=n.fromIndex,i=n.toIndex,o=e.address.toString(),a=e.form.fields,s=o.length,u=[],c=r<i;Jn((function(){p(a,(function(e,t){if(function(e){return 0===e.indexOf(o)&&e.length>s}(t)&&(function(e){var t,n=null===(t=e.slice(o.length).match(Oi))||void 0===t?void 0:t[1];if(void 0===n)return!1;var a=Number(n);return c?a>r&&a<=i:a<r&&a>=i}(t)||function(e){var t,n=null===(t=e.substring(s).match(Oi))||void 0===t?void 0:t[1];return void 0!==n&&Number(n)===r}(t))){var n=function(e){var t=e.substring(0,s),n=e.substring(s),o=n.match(Oi)[1],a=Number(o);return a===r?a=i:a+=c?-1:1,"".concat(t).concat(n.replace(/^\.\d+/,".".concat(a)))}(t);u.push({type:"update",address:n,oldAddress:t,payload:e}),a[n]||u.push({type:"remove",address:t})}})),Fi(a,u)})),e.form.notify(li.ON_FORM_GRAPH_CHANGE)},Ri=function(e,t){var n=e.address.toString(),r=e.form.fields;Jn((function(){p(r,(function(e,r){(function(e){return 0===e.indexOf(n)&&e.length>n.length})(r)&&function(e){var r,i=null===(r=e.slice(n.length).match(Oi))||void 0===r?void 0:r[1];return void 0!==i&&Number(i)>=t}(r)&&e.destroy()}))}))},ji=function(e,t){if(0!==t.length){var n=e.address.toString(),r=e.form.fields;Jn((function(){p(r,(function(e,r){(function(e){return 0===e.indexOf(n)&&e.length>n.length})(r)&&function(e){var r,i=null===(r=e.slice(n.length).match(/^\.([^.]+)/))||void 0===r?void 0:r[1];return void 0!==i&&t.includes(i)}(r)&&e.destroy()}))}))}},Ci=Jn.scope.bound((function(e){for(var t=e.form,n=pt.ensureIn(t,"requests.updates",[]),r=pt.ensureIn(t,"requests.updateIndexes",{}),i=0;i<n.length;i++){var o=n[i],a=o.pattern,s=o.callbacks,u=!1;e.match(a)&&(s.forEach((function(t){e.setState(t)})),a.isWildMatchPattern||a.isMatchPattern||(n.splice(i--,1),u=!0)),u?delete r[a.toString()]:r[a.toString()]=i}})),Ui=function(e){var t,n=null===(t=e.address)||void 0===t?void 0:t.toString();return function(e){var t=e.address;return t===n||0===t.indexOf(n+".")}},qi=function(e){return Jn.bound((function(t){return function(e,t){if(e){if(i(t))t(e);else for(var n in t)if(Ei.call(t,n)&&!vi[n]&&!hi[n]){var r=gi[n];if(!r||!Ei.call(t,r)||S(t[r])){var o=t[n];i(o)||(e[n]=o)}}return e}}(e,t)}))},Gi=function(e){return function(t){return function(e,t){if(i(t))return t(e);var n={};for(var r in e)if(Ei.call(e,r)&&!hi[r])if("address"!==r&&"path"!==r){var o=e[r];i(o)||(n[r]=Tn(o))}else n[r]=e[r].toString();return n}(e,t)}},Bi=function(e){return Jn.bound((function(t,n){if(Rr(t))t.forEach((function(e){e.setState(n)}));else if(Mr(t))t.setState(n);else{var r=0,i=pt.parse(t);e.query(i).forEach((function(e){e.setState(n),r++})),(0===r||i.isWildMatchPattern)&&function(e,t,n){var r=pt.ensureIn(e,"requests.updates",[]),i=pt.ensureIn(e,"requests.updateIndexes",{}),o=t.toString(),a=i[o];S(a)?r[a]&&!r[a].callbacks.some((function(e){return e.toString()===n.toString()&&e===n}))&&r[a].callbacks.push(n):(i[o]=r.length,r.push({pattern:t,callbacks:[n]}))}(e,i,n)}}))},zi=function(e,t){var n=t.path;Array.isArray(t.object)&&"length"===t.key||(Fn(e.initialValues,t.object)||e.initialValues===t.value)&&("add"!==t.type&&"set"!==t.type||function(e,t,n){var r=function(t,n){t.length?e.setValuesIn(t,_(n)):Object.assign(e.values,_(n))},i=function(t,n){void 0===n&&(n=[]);var o=e.getValuesIn(n),s=e.query(n).take(),u=s&&!Dr(s);if(u&&"none"===s.display)s.caches.value=_(t);else if(eo(o,t))r(n,t);else{if(P(t))return;if(bi.initializing)return;a(o)&&a(t)?p(t,(function(e,t){i(e,n.concat(t))})):s?u&&!s.selfModified&&r(n,t):e.initialized&&r(n,t)}};i(n,t)}(e,n.slice(1),t.value),e.initialized&&e.notify(li.ON_FORM_INITIAL_VALUES_CHANGE))},$i=function(e,t){clearTimeout(e.requests.validate),t?(e.requests.validate=setTimeout((function(){Jn((function(){e.validating=t,Si(e,li.ON_FORM_VALIDATING,li.ON_FIELD_VALIDATING)}))}),100),Si(e,li.ON_FORM_VALIDATE_START,li.ON_FIELD_VALIDATE_START)):(e.validating!==t&&(e.validating=t),Si(e,li.ON_FORM_VALIDATE_END,li.ON_FIELD_VALIDATE_END))},Wi=function(e,t){clearTimeout(e.requests.submit),t?(e.requests.submit=setTimeout((function(){Jn((function(){e.submitting=t,Si(e,li.ON_FORM_SUBMITTING,li.ON_FIELD_SUBMITTING)}))}),100),Si(e,li.ON_FORM_SUBMIT_START,li.ON_FIELD_SUBMIT_START)):(e.submitting!==t&&(e.submitting=t),Si(e,li.ON_FORM_SUBMIT_END,li.ON_FIELD_SUBMIT_END))},Hi=function(e,t){clearTimeout(e.requests.loading),t?e.requests.loading=setTimeout((function(){Jn((function(){e.loading=t,Si(e,li.ON_FORM_LOADING,li.ON_FIELD_LOADING)}))}),100):e.loading!==t&&(e.loading=t)},Ji=function(e,t){return xi(void 0,void 0,void 0,(function(){var n,r,o;return Ii(this,(function(a){switch(a.label){case 0:n=function(e){return wr(e)?Tn(e.values):Tn(e.value)},e.setSubmitting(!0),a.label=1;case 1:return a.trys.push([1,3,,4]),Si(e,li.ON_FORM_SUBMIT_VALIDATE_START,li.ON_FIELD_SUBMIT_VALIDATE_START),[4,e.validate()];case 2:return a.sent(),Si(e,li.ON_FORM_SUBMIT_VALIDATE_SUCCESS,li.ON_FIELD_SUBMIT_VALIDATE_SUCCESS),[3,4];case 3:return a.sent(),Si(e,li.ON_FORM_SUBMIT_VALIDATE_FAILED,li.ON_FIELD_SUBMIT_VALIDATE_FAILED),[3,4];case 4:Si(e,li.ON_FORM_SUBMIT_VALIDATE_END,li.ON_FIELD_SUBMIT_VALIDATE_END),a.label=5;case 5:if(a.trys.push([5,9,,10]),e.invalid)throw e.errors;return i(t)?[4,t(n(e))]:[3,7];case 6:return r=a.sent(),[3,8];case 7:r=n(e),a.label=8;case 8:return Si(e,li.ON_FORM_SUBMIT_SUCCESS,li.ON_FIELD_SUBMIT_SUCCESS),[3,10];case 9:throw o=a.sent(),e.setSubmitting(!1),Si(e,li.ON_FORM_SUBMIT_FAILED,li.ON_FIELD_SUBMIT_FAILED),Si(e,li.ON_FORM_SUBMIT,li.ON_FIELD_SUBMIT),o;case 10:return e.setSubmitting(!1),Si(e,li.ON_FORM_SUBMIT,li.ON_FIELD_SUBMIT),[2,r]}}))}))},Ki=function(e,t,n){return xi(void 0,void 0,void 0,(function(){var r;return Ii(this,(function(i){switch(i.label){case 0:if(wr(e))e.setValidating(!0);else if("editable"!==e.pattern||"visible"!==e.display)return[2];return r=[],e.query(t).forEach((function(t){Dr(t)||r.push(Qi(t,n,t===e))})),[4,Promise.all(r)];case 1:if(i.sent(),wr(e)&&e.setValidating(!1),e.invalid)throw Si(e,li.ON_FORM_VALIDATE_FAILED,li.ON_FIELD_VALIDATE_FAILED),e.errors;return Si(e,li.ON_FORM_VALIDATE_SUCCESS,li.ON_FIELD_VALIDATE_SUCCESS),[2]}}))}))},Zi=function(e,t,n){return xi(void 0,void 0,void 0,(function(){var r;return Ii(this,(function(i){switch(i.label){case 0:return r=[],e.query(t).forEach((function(t){Dr(t)||r.push(Yi(t,n,e===t))})),wr(e)&&(e.modified=!1),Si(e,li.ON_FORM_RESET,li.ON_FIELD_RESET),[4,Promise.all(r)];case 1:return i.sent(),[2]}}))}))},Qi=Jn.bound((function(e,t,n){return void 0===n&&(n=!1),xi(void 0,void 0,void 0,(function(){var r,i,o,a,s,u;return Ii(this,(function(c){switch(c.label){case 0:if(r=function(){$i(e,!0)},i=function(){$i(e,!1),n||(e.selfValid?e.notify(li.ON_FIELD_VALIDATE_SUCCESS):e.notify(li.ON_FIELD_VALIDATE_FAILED))},"editable"!==e.pattern||"visible"!==e.display)return[2,{}];if(r(),t)return[3,5];o=Zr(e.validator).reduce((function(e,t){return e.indexOf(t.triggerType)>-1?e:e.concat(t.triggerType)}),[]),a={},s=0,c.label=1;case 1:return s<o.length?[4,Li(e,o[s])]:[3,4];case 2:p(c.sent(),(function(e,t){a[t]=a[t]||[],a[t]=a[t].concat(e)})),c.label=3;case 3:return s++,[3,1];case 4:return i(),[2,a];case 5:return[4,Li(e,t)];case 6:return u=c.sent(),i(),[2,u]}}))}))})),Yi=Jn.bound((function(e,t,n){return void 0===n&&(n=!1),xi(void 0,void 0,void 0,(function(){var r;return Ii(this,(function(i){switch(i.label){case 0:return r=kr(o=e)?[]:Lr(o)?{}:void 0,e.modified=!1,e.selfModified=!1,e.visited=!1,e.feedbacks=[],e.inputValue=r,e.inputValues=[],e.caches={},E(e.value)||((null==t?void 0:t.forceClear)?e.value=r:e.value=Tn(E(e.initialValue)?r:e.initialValue)),n||e.notify(li.ON_FIELD_RESET),(null==t?void 0:t.validate)?[4,Qi(e)]:[3,2];case 1:return[2,i.sent()];case 2:return[2]}var o}))}))})),Xi=function(e){return Pn(e)?e:_(e||{})},eo=function(e,t){var n=null!==e&&P(e),r=null!==t&&P(t),i=!E(e),o=!E(t);if(!i)return!!o;if(typeof e==typeof t){if(""===e)return!1;if(0===e)return!1}return!!n&&!r},to=function(e){var t=f(e.props.reactions);e.form.addEffects(e,(function(){t.forEach((function(t){i(t)&&e.disposers.push(lr(Jn.scope.bound((function(){e.destroyed||t(e)}))))}))}))},no=function(e,t){return pr(e,Zn.bound(t))},ro=function(){bi.initializing=!0},io=function(){Jn.endpoint((function(){bi.initializing=!1}))},oo=function(e,t){if(e)return i(t)?t(e,e.address):e},ao=function(){function e(e){var t,n,r,i,o,a,s=this;if(this.addresses=[],this.pattern=pt.parse(e.pattern,e.base),this.form=e.form,this.pattern.isMatchPattern)p(this.form.fields,(function(e,t){e.match(s.pattern)&&s.addresses.push(t)}));else{var u=(t=this.form,n=this.pattern.haveRelativePattern?Ni(e.form.fields,this.pattern):this.pattern,r=n.toString(),i=t.indexes[r],o=t.fields[r],a=t.fields[i],o?r:a?i:void 0);u&&(this.addresses=[u])}}return e.prototype.take=function(e){return oo(this.form.fields[this.addresses[0]],e)},e.prototype.map=function(e){var t=this;return this.addresses.map((function(n){return oo(t.form.fields[n],e)}))},e.prototype.forEach=function(e){var t=this;return this.addresses.forEach((function(n){return oo(t.form.fields[n],e)}))},e.prototype.reduce=function(e,t){var n=this;return this.addresses.reduce((function(t,r){return oo(n.form.fields[r],(function(n,r){return e(t,n,r)}))}),t)},e.prototype.get=function(e){var t=this.take();if(t)return t[e]},e.prototype.getIn=function(e){return pt.getIn(this.take(),e)},e.prototype.value=function(){return this.get("value")},e.prototype.initialValue=function(){return this.get("initialValue")},e}(),so=function(){function e(){var e=this;this.disposers=[],this.setTitle=function(t){e.title=t},this.setDescription=function(t){e.description=t},this.setDisplay=function(t){e.display=t},this.setPattern=function(t){e.pattern=t},this.setComponent=function(t,n){t&&(e.componentType=t),n&&(e.componentProps=e.componentProps||{},Object.assign(e.componentProps,n))},this.setComponentProps=function(t){t&&(e.componentProps=e.componentProps||{},Object.assign(e.componentProps,t))},this.setDecorator=function(t,n){t&&(e.decoratorType=t),n&&(e.decoratorProps=e.decoratorProps||{},Object.assign(e.decoratorProps,n))},this.setDecoratorProps=function(t){t&&(e.decoratorProps=e.decoratorProps||{},Object.assign(e.decoratorProps,t))},this.setData=function(t){e.data=t},this.setContent=function(t){e.content=t},this.onInit=function(){e.initialized=!0,Ci(e),e.notify(li.ON_FIELD_INIT)},this.onMount=function(){e.mounted=!0,e.unmounted=!1,e.notify(li.ON_FIELD_MOUNT)},this.onUnmount=function(){e.mounted=!1,e.unmounted=!0,e.notify(li.ON_FIELD_UNMOUNT)},this.query=function(t){return new ao({pattern:t,base:e.address,form:e.form})},this.notify=function(t,n){return e.form.notify(t,null!=n?n:e)},this.dispose=function(){e.disposers.forEach((function(e){e()})),e.form.removeEffects(e)},this.destroy=function(t){void 0===t&&(t=!0),wi(e.form.fields,e.address.toString(),t)},this.match=function(t){return pt.parse(t).matchAliasGroup(e.address,e.path)}}return e.prototype.locate=function(e){this.form.fields[e.toString()]=this,Ti(this,e)},Object.defineProperty(e.prototype,"indexes",{get:function(){return this.path.transform(/\d/,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.map((function(e){return Number(e)}))}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this.indexes[this.indexes.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){return[this.componentType,this.componentProps]},set:function(e){var t=f(e);this.componentType=t[0],this.componentProps=t[1]||{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"decorator",{get:function(){return[this.decoratorType,this.decoratorProps]},set:function(e){var t=f(e);this.decoratorType=t[0],this.decoratorProps=t[1]||{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){for(var e=this.address.parent(),t=e.toString();!this.form.fields[t];)if(!(t=(e=e.parent()).toString()))return;return this.form.fields[t]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){var e,t=null===(e=this.parent)||void 0===e?void 0:e.display;return t&&"visible"!==t?this.selfDisplay&&"visible"!==this.selfDisplay?this.selfDisplay:t:S(this.selfDisplay)?this.selfDisplay:t||this.form.display||"visible"},set:function(e){this.selfDisplay=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pattern",{get:function(){var e,t=(null===(e=this.parent)||void 0===e?void 0:e.pattern)||this.form.pattern||"editable",n=this.selfPattern;return S(n)?"readPretty"===t&&"editable"!==n?t:n:t},set:function(e){this.selfPattern=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return"editable"===this.pattern},set:function(e){S(e)&&(this.pattern=e?"editable":"readPretty")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return"disabled"===this.pattern},set:function(e){S(e)&&(this.pattern=e?"disabled":"editable")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readOnly",{get:function(){return"readOnly"===this.pattern},set:function(e){S(e)&&(this.pattern=e?"readOnly":"editable")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readPretty",{get:function(){return"readPretty"===this.pattern},set:function(e){S(e)&&(this.pattern=e?"readPretty":"editable")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return"hidden"===this.display},set:function(e){S(e)&&(this.display=e?"hidden":"visible")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return"visible"===this.display},set:function(e){S(e)&&(this.display=e?"visible":"none")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return!this.form.fields[this.address.toString()]},enumerable:!1,configurable:!0}),e}(),uo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),co=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},lo=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},fo=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.displayName="Field",o.caches={},o.requests={},o.setDataSource=function(e){o.dataSource=e},o.setFeedback=function(e){!function(e,t){if(t)Jn((function(){var n,r;if(e.feedbacks.length){var i=Mi(e,t);if(i.length)return void(e.feedbacks=e.feedbacks.reduce((function(e,n){var r;return i.includes(n)?(null===(r=t.messages)||void 0===r?void 0:r.length)?(n.messages=t.messages,e.concat(n)):e:e.concat(n)}),[]));(null===(r=t.messages)||void 0===r?void 0:r.length)&&(e.feedbacks=e.feedbacks.concat(t))}else{if(!(null===(n=t.messages)||void 0===n?void 0:n.length))return;e.feedbacks=[t]}}))}(o,e)},o.setSelfErrors=function(e){o.selfErrors=e},o.setSelfWarnings=function(e){o.selfWarnings=e},o.setSelfSuccesses=function(e){o.selfSuccesses=e},o.setValidator=function(e){o.validator=e},o.setValidatorRule=function(e,t){!function(e,t,n){var r;if(S(n)){var i=Zr(e.validator),o=i.some((function(e){return t in e})),s=((r={})[t]=n,r);e.validator=o?i.map((function(e){return a(e)&&Ei.call(e,t)?(e[t]=n,e):e})):"required"===t?[s].concat(i):i.concat(s)}}(o,e,t)},o.setRequired=function(e){o.required=e},o.setValue=function(e){o.value=e},o.setInitialValue=function(e){o.initialValue=e},o.setLoading=function(e){Hi(o,e)},o.setValidating=function(e){$i(o,e)},o.setSubmitting=function(e){Wi(o,e)},o.setState=qi(o),o.getState=Gi(o),o.onInput=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return co(o,void 0,void 0,(function(){var t,n,r;return lo(this,(function(i){switch(i.label){case 0:return t=function(e){var t;return(null===(t=e[0])||void 0===t?void 0:t.target)&&!Pi(e[0])?e:Ai(e)},n=t(e),r=n[0],this.caches.inputting=!0,this.inputValue=r,this.inputValues=n,this.value=r,this.modify(),this.notify(li.ON_FIELD_INPUT_VALUE_CHANGE),this.notify(li.ON_FORM_INPUT_CHANGE,this.form),[4,Qi(this,"onInput")];case 1:return i.sent(),this.caches.inputting=!1,[2]}}))}))},o.onFocus=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return co(o,void 0,void 0,(function(){var t;return lo(this,(function(n){switch(n.label){case 0:return(null===(t=e[0])||void 0===t?void 0:t.target)&&!Pi(e[0],!1)?[2]:(this.active=!0,this.visited=!0,[4,Qi(this,"onFocus")]);case 1:return n.sent(),[2]}}))}))},o.onBlur=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return co(o,void 0,void 0,(function(){var t;return lo(this,(function(n){switch(n.label){case 0:return(null===(t=e[0])||void 0===t?void 0:t.target)&&!Pi(e[0],!1)?[2]:(this.active=!1,[4,Qi(this,"onBlur")]);case 1:return n.sent(),[2]}}))}))},o.validate=function(e){return Ki(o,"".concat(o.address,".**"),e)},o.submit=function(e){return Ji(o,e)},o.reset=function(e){return Zi(o,"".concat(o.address,".**"),e)},o.queryFeedbacks=function(e){return Mi(o,e)},o.modify=function(){return function(e){if(!e.selfModified){e.selfModified=!0,e.modified=!0;for(var t=e.parent;t;){if(Vr(t)){if(t.modified)return;t.modified=!0}t=t.parent}e.form.modified=!0}}(o)},o.form=r,o.props=n,o.designable=i,ro(),o.locate(t),o.initialize(),o.makeObservable(),o.makeReactive(),o.onInit(),io(),o}return uo(t,e),t.prototype.initialize=function(){var e,t;this.initialized=!1,this.loading=!1,this.validating=!1,this.submitting=!1,this.selfModified=!1,this.active=!1,this.visited=!1,this.mounted=!1,this.unmounted=!1,this.inputValues=[],this.inputValue=null,this.feedbacks=[],this.title=this.props.title,this.description=this.props.description,this.display=this.props.display,this.pattern=this.props.pattern,this.editable=this.props.editable,this.disabled=this.props.disabled,this.readOnly=this.props.readOnly,this.readPretty=this.props.readPretty,this.visible=this.props.visible,this.hidden=this.props.hidden,this.dataSource=this.props.dataSource,this.validator=this.props.validator,this.required=this.props.required,this.content=this.props.content,this.value=(e=this.props.value,t=this.props.initialValue,eo(e,t)?_(t):e),this.initialValue=this.props.initialValue,this.data=this.props.data,this.decorator=f(this.props.decorator),this.component=f(this.props.component)},t.prototype.makeObservable=function(){this.designable||ur(this,{path:sr.ref,title:sr.ref,description:sr.ref,dataSource:sr.ref,selfDisplay:sr.ref,selfPattern:sr.ref,loading:sr.ref,validating:sr.ref,submitting:sr.ref,selfModified:sr.ref,modified:sr.ref,active:sr.ref,visited:sr.ref,initialized:sr.ref,mounted:sr.ref,unmounted:sr.ref,inputValue:sr.ref,inputValues:sr.ref,decoratorType:sr.ref,componentType:sr.ref,content:sr.ref,feedbacks:sr.ref,decoratorProps:sr,componentProps:sr,validator:sr.shallow,data:sr.shallow,component:sr.computed,decorator:sr.computed,errors:sr.computed,warnings:sr.computed,successes:sr.computed,valid:sr.computed,invalid:sr.computed,selfErrors:sr.computed,selfWarnings:sr.computed,selfSuccesses:sr.computed,selfValid:sr.computed,selfInvalid:sr.computed,validateStatus:sr.computed,value:sr.computed,initialValue:sr.computed,display:sr.computed,pattern:sr.computed,required:sr.computed,hidden:sr.computed,visible:sr.computed,disabled:sr.computed,readOnly:sr.computed,readPretty:sr.computed,editable:sr.computed,indexes:sr.computed,setDisplay:Kn,setTitle:Kn,setDescription:Kn,setDataSource:Kn,setValue:Kn,setPattern:Kn,setInitialValue:Kn,setLoading:Kn,setValidating:Kn,setFeedback:Kn,setSelfErrors:Kn,setSelfWarnings:Kn,setSelfSuccesses:Kn,setValidator:Kn,setRequired:Kn,setComponent:Kn,setComponentProps:Kn,setDecorator:Kn,setDecoratorProps:Kn,setData:Kn,setContent:Kn,validate:Kn,reset:Kn,onInit:Jn,onInput:Jn,onMount:Jn,onUnmount:Jn,onFocus:Jn,onBlur:Jn})},t.prototype.makeReactive=function(){var e=this;this.designable||(this.disposers.push(no((function(){return e.value}),(function(t){e.notify(li.ON_FIELD_VALUE_CHANGE),S(t)&&e.selfModified&&!e.caches.inputting&&Qi(e)})),no((function(){return e.initialValue}),(function(){e.notify(li.ON_FIELD_INITIAL_VALUE_CHANGE)})),no((function(){return e.display}),(function(t){var n,r=e.value;"visible"===t?P(r)&&(e.setValue(e.caches.value),e.caches.value=void 0):(e.caches.value=null!==(n=Tn(r))&&void 0!==n?n:Tn(e.initialValue),"none"===t&&e.form.deleteValuesIn(e.path)),"none"!==t&&"hidden"!==t||e.setFeedback({type:"error",messages:[]})})),no((function(){return e.pattern}),(function(t){"editable"!==t&&e.setFeedback({type:"error",messages:[]})}))),to(this))},Object.defineProperty(t.prototype,"selfErrors",{get:function(){return ki(this,{type:"error"})},set:function(e){this.setFeedback({type:"error",code:"EffectError",messages:e})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errors",{get:function(){return this.form.errors.filter(Ui(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selfWarnings",{get:function(){return ki(this,{type:"warning"})},set:function(e){this.setFeedback({type:"warning",code:"EffectWarning",messages:e})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"warnings",{get:function(){return this.form.warnings.filter(Ui(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selfSuccesses",{get:function(){return ki(this,{type:"success"})},set:function(e){this.setFeedback({type:"success",code:"EffectSuccess",messages:e})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"successes",{get:function(){return this.form.successes.filter(Ui(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selfValid",{get:function(){return!this.selfErrors.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return!this.errors.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selfInvalid",{get:function(){return!this.selfValid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"invalid",{get:function(){return!this.valid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.form.getValuesIn(this.path)},set:function(e){if(!this.destroyed){if(!this.initialized){if("none"===this.display)return void(this.caches.value=e);if(!eo(this.value,e)&&!this.designable)return}this.form.setValuesIn(this.path,e)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"initialValue",{get:function(){return this.form.getInitialValuesIn(this.path)},set:function(e){this.destroyed||(this.initialized||eo(this.initialValue,e)||this.designable)&&this.form.setInitialValuesIn(this.path,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return(o(this.validator)?this.validator:Zr(this.validator)).some((function(e){return!!(null==e?void 0:e.required)}))},set:function(e){this.required!==e&&this.setValidatorRule("required",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validateStatus",{get:function(){return this.validating?"validating":this.selfInvalid?"error":this.selfWarnings.length?"warning":this.selfSuccesses.length?"success":void 0},enumerable:!1,configurable:!0}),t}(so),po=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},ho=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},vo=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!bi.effectStart)throw new Error("Effect hooks cannot be used in asynchronous function body");bi.lifecycles.push(new Nr(e,(function(e,r){i(t)&&t.apply(void 0,ho([e,r],po(bi.context),!1)).apply(void 0,ho([],po(n),!1))})))}},mo={provide:function(e){if(!bi.effectStart)throw new Error("Provide method cannot be used in asynchronous function body");di=bi.context.length,bi.context[di]=S(e)?e:pi},consume:function(){if(!bi.effectStart)throw new Error("Consume method cannot be used in asynchronous function body");return bi.context[di]}},yo=mo.consume,go=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return bi.lifecycles=[],bi.context=[],bi.effectStart=!0,bi.effectEnd=!1,wr(e)&&mo.provide(e),t.forEach((function(t){i(t)&&t(e)})),bi.context=[],bi.effectStart=!1,bi.effectEnd=!0,bi.lifecycles},bo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oo=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},_o=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},xo=function(e){function t(t,n,r,i){var a=e.call(this,t,n,r,i)||this;return a.displayName="ArrayField",a.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Kn((function(){var t;return o(a.value)||(a.value=[]),(t=a.value).push.apply(t,_o([],Oo(e),!1)),a.onInput(a.value)}))},a.pop=function(){if(o(a.value))return Kn((function(){var e=a.value.length-1;return Di(a,{startIndex:e,deleteCount:1}),a.value.pop(),a.onInput(a.value)}))},a.insert=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Kn((function(){var n;return o(a.value)||(a.value=[]),Di(a,{startIndex:e,insertCount:t.length}),(n=a.value).splice.apply(n,_o([e,0],Oo(t),!1)),a.onInput(a.value)}))},a.remove=function(e){if(o(a.value))return Kn((function(){return Di(a,{startIndex:e,deleteCount:1}),a.value.splice(e,1),a.onInput(a.value)}))},a.shift=function(){if(o(a.value))return Kn((function(){return a.value.shift(),a.onInput(a.value)}))},a.unshift=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Kn((function(){var t;return o(a.value)||(a.value=[]),Di(a,{startIndex:0,insertCount:e.length}),(t=a.value).unshift.apply(t,_o([],Oo(e),!1)),a.onInput(a.value)}))},a.move=function(e,t){if(o(a.value)&&e!==t)return Kn((function(){var n=a.value[e];return a.value.splice(e,1),a.value.splice(t,0,n),Vi(a,{fromIndex:e,toIndex:t}),a.onInput(a.value)}))},a.moveUp=function(e){if(o(a.value))return a.move(e,e-1<0?a.value.length-1:e-1)},a.moveDown=function(e){if(o(a.value))return a.move(e,e+1>=a.value.length?0:e+1)},a.makeAutoCleanable(),a}return bo(t,e),t.prototype.makeAutoCleanable=function(){var e=this;this.disposers.push(pr((function(){var t;return null===(t=e.value)||void 0===t?void 0:t.length}),(function(t,n){n&&!t?Ri(e,0):t<n&&Ri(e,t)})))},t}(fo),Io=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Eo=function(e){function t(t,n,r,i){var o=e.call(this,t,n,r,i)||this;return o.displayName="ObjectField",o.additionalProperties=[],o.addProperty=function(e,t){return o.form.setValuesIn(o.path.concat(e),t),o.additionalProperties.push(e),o.onInput(o.value)},o.removeProperty=function(e){return o.form.deleteValuesIn(o.path.concat(e)),o.additionalProperties.splice(o.additionalProperties.indexOf(e),1),o.onInput(o.value)},o.existProperty=function(e){return o.form.existValuesIn(o.path.concat(e))},o.makeAutoCleanable(),o}return Io(t,e),t.prototype.makeAutoCleanable=function(){var e=this;this.disposers.push(pr((function(){return Object.keys(e.value||{})}),(function(t){var n=e.additionalProperties.filter((function(e){return!t.includes(e)}));ji(e,n)})))},t}(fo),So=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Po=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.displayName="VoidField",o.setState=qi(o),o.getState=Gi(o),o.form=r,o.props=n,o.designable=i,ro(),o.locate(t),o.initialize(),o.makeObservable(),o.makeReactive(),o.onInit(),io(),o}return So(t,e),t.prototype.initialize=function(){this.mounted=!1,this.unmounted=!1,this.initialized=!1,this.title=this.props.title,this.description=this.props.description,this.pattern=this.props.pattern,this.display=this.props.display,this.hidden=this.props.hidden,this.editable=this.props.editable,this.disabled=this.props.disabled,this.readOnly=this.props.readOnly,this.readPretty=this.props.readPretty,this.visible=this.props.visible,this.content=this.props.content,this.data=this.props.data,this.decorator=f(this.props.decorator),this.component=f(this.props.component)},t.prototype.makeObservable=function(){this.designable||ur(this,{path:sr.ref,title:sr.ref,description:sr.ref,selfDisplay:sr.ref,selfPattern:sr.ref,initialized:sr.ref,mounted:sr.ref,unmounted:sr.ref,decoratorType:sr.ref,componentType:sr.ref,content:sr.ref,data:sr.shallow,decoratorProps:sr,componentProps:sr,display:sr.computed,pattern:sr.computed,hidden:sr.computed,visible:sr.computed,disabled:sr.computed,readOnly:sr.computed,readPretty:sr.computed,editable:sr.computed,component:sr.computed,decorator:sr.computed,indexes:sr.computed,setTitle:Kn,setDescription:Kn,setDisplay:Kn,setPattern:Kn,setComponent:Kn,setComponentProps:Kn,setDecorator:Kn,setDecoratorProps:Kn,setData:Kn,setContent:Kn,onInit:Jn,onMount:Jn,onUnmount:Jn})},t.prototype.makeReactive=function(){this.designable||to(this)},t}(so),Ao=function(){return Ao=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ao.apply(this,arguments)},No="__FORMILY_DEV_TOOLS_HOOK__",To=function(){function e(e){var t,n=this;this.displayName="Form",this.fields={},this.requests={},this.indexes={},this.disposers=[],this.createField=function(e){var t=pt.parse(e.basePath).concat(e.name),r=t.toString();if(r)return n.fields[r]&&!n.props.designable||(Jn((function(){new fo(t,e,n,n.props.designable)})),n.notify(li.ON_FORM_GRAPH_CHANGE)),n.fields[r]},this.createArrayField=function(e){var t=pt.parse(e.basePath).concat(e.name),r=t.toString();if(r)return n.fields[r]&&!n.props.designable||(Jn((function(){new xo(t,Ao(Ao({},e),{value:o(e.value)?e.value:[]}),n,n.props.designable)})),n.notify(li.ON_FORM_GRAPH_CHANGE)),n.fields[r]},this.createObjectField=function(e){var t=pt.parse(e.basePath).concat(e.name),r=t.toString();if(r)return n.fields[r]&&!n.props.designable||(Jn((function(){new Eo(t,Ao(Ao({},e),{value:l(e.value)?e.value:{}}),n,n.props.designable)})),n.notify(li.ON_FORM_GRAPH_CHANGE)),n.fields[r]},this.createVoidField=function(e){var t=pt.parse(e.basePath).concat(e.name),r=t.toString();if(r)return n.fields[r]&&!n.props.designable||(Jn((function(){new Po(t,e,n,n.props.designable)})),n.notify(li.ON_FORM_GRAPH_CHANGE)),n.fields[r]},this.setValues=function(e,t){void 0===t&&(t="merge"),a(e)&&(n.values="merge"===t||"deepMerge"===t?xt(n.values,e,{arrayMerge:function(e,t){return t}}):"shallowMerge"===t?Object.assign(n.values,e):e)},this.setInitialValues=function(e,t){void 0===t&&(t="merge"),a(e)&&(n.initialValues="merge"===t||"deepMerge"===t?xt(n.initialValues,e,{arrayMerge:function(e,t){return t}}):"shallowMerge"===t?Object.assign(n.initialValues,e):e)},this.setValuesIn=function(e,t){pt.setIn(n.values,e,t)},this.deleteValuesIn=function(e){pt.deleteIn(n.values,e)},this.existValuesIn=function(e){return pt.existIn(n.values,e)},this.getValuesIn=function(e){return pt.getIn(n.values,e)},this.setInitialValuesIn=function(e,t){pt.setIn(n.initialValues,e,t)},this.deleteInitialValuesIn=function(e){pt.deleteIn(n.initialValues,e)},this.existInitialValuesIn=function(e){return pt.existIn(n.initialValues,e)},this.getInitialValuesIn=function(e){return pt.getIn(n.initialValues,e)},this.setLoading=function(e){Hi(n,e)},this.setSubmitting=function(e){Wi(n,e)},this.setValidating=function(e){$i(n,e)},this.setDisplay=function(e){n.display=e},this.setPattern=function(e){n.pattern=e},this.addEffects=function(e,t){n.heart.hasLifeCycles(e)||n.heart.addLifeCycles(e,go(n,t))},this.removeEffects=function(e){n.heart.removeLifeCycles(e)},this.setEffects=function(e){n.heart.setLifeCycles(go(n,e))},this.clearErrors=function(e){void 0===e&&(e="*"),n.query(e).forEach((function(e){Dr(e)||e.setFeedback({type:"error",messages:[]})}))},this.clearWarnings=function(e){void 0===e&&(e="*"),n.query(e).forEach((function(e){Dr(e)||e.setFeedback({type:"warning",messages:[]})}))},this.clearSuccesses=function(e){void 0===e&&(e="*"),n.query(e).forEach((function(e){Dr(e)||e.setFeedback({type:"success",messages:[]})}))},this.query=function(e){return new ao({pattern:e,base:"",form:n})},this.queryFeedbacks=function(e){return n.query(e.address||e.path||"*").reduce((function(t,n){return Dr(n)?t:t.concat(n.queryFeedbacks(e).map((function(e){return Ao(Ao({},e),{address:n.address.toString(),path:n.path.toString()})})).filter((function(e){return e.messages.length>0})))}),[])},this.notify=function(e,t){n.heart.publish(e,null!=t?t:n)},this.subscribe=function(e){return n.heart.subscribe(e)},this.unsubscribe=function(e){n.heart.unsubscribe(e)},this.onInit=function(){n.initialized=!0,n.notify(li.ON_FORM_INIT)},this.onMount=function(){n.mounted=!0,n.notify(li.ON_FORM_MOUNT),h[No]&&!n.props.designable&&h[No].inject(n.id,n)},this.onUnmount=function(){n.notify(li.ON_FORM_UNMOUNT),n.query("*").forEach((function(e){return e.destroy(!1)})),n.disposers.forEach((function(e){return e()})),n.unmounted=!0,n.indexes={},n.heart.clear(),h[No]&&!n.props.designable&&h[No].unmount(n.id)},this.setState=qi(this),this.getState=Gi(this),this.setFormState=qi(this),this.getFormState=Gi(this),this.setFieldState=Bi(this),this.getFieldState=(t=this,function(e,n){return Rr(e)?e.take(n):Mr(e)?e.getState(n):t.query(e).take((function(e){return e.getState(n)}))}),this.getFormGraph=function(){return n.graph.getGraph()},this.setFormGraph=function(e){n.graph.setGraph(e)},this.clearFormGraph=function(e,t){void 0===e&&(e="*"),void 0===t&&(t=!0),n.query(e).forEach((function(e){e.destroy(t)}))},this.validate=function(e){return void 0===e&&(e="*"),Ki(n,e)},this.submit=function(e){return Ji(n,e)},this.reset=function(e,t){return void 0===e&&(e="*"),Zi(n,e,t)},this.initialize(e),this.makeObservable(),this.makeReactive(),this.makeValues(),this.onInit()}return e.prototype.initialize=function(e){this.id=function(e){for(var t="",n=e||11;n--;)t+=Et[36*Math.random()|0];return t}(),this.props=Ao({},e),this.initialized=!1,this.submitting=!1,this.validating=!1,this.loading=!1,this.modified=!1,this.mounted=!1,this.unmounted=!1,this.display=this.props.display||"visible",this.pattern=this.props.pattern||"editable",this.editable=this.props.editable,this.disabled=this.props.disabled,this.readOnly=this.props.readOnly,this.readPretty=this.props.readPretty,this.visible=this.props.visible,this.hidden=this.props.hidden,this.graph=new jr(this),this.heart=new Fr({lifecycles:this.lifecycles,context:this})},e.prototype.makeValues=function(){this.values=Xi(this.props.values),this.initialValues=Xi(this.props.initialValues)},e.prototype.makeObservable=function(){ur(this,{fields:sr.shallow,initialized:sr.ref,validating:sr.ref,submitting:sr.ref,loading:sr.ref,modified:sr.ref,pattern:sr.ref,display:sr.ref,mounted:sr.ref,unmounted:sr.ref,values:sr,initialValues:sr,valid:sr.computed,invalid:sr.computed,errors:sr.computed,warnings:sr.computed,successes:sr.computed,hidden:sr.computed,visible:sr.computed,editable:sr.computed,readOnly:sr.computed,readPretty:sr.computed,disabled:sr.computed,setValues:Kn,setValuesIn:Kn,setInitialValues:Kn,setInitialValuesIn:Kn,setPattern:Kn,setDisplay:Kn,setState:Kn,deleteInitialValuesIn:Kn,deleteValuesIn:Kn,setSubmitting:Kn,setValidating:Kn,setFormGraph:Kn,clearFormGraph:Kn,reset:Kn,submit:Kn,validate:Kn,onMount:Jn,onUnmount:Jn,onInit:Jn})},e.prototype.makeReactive=function(){var e=this;this.disposers.push(function(e,t,n){if(void 0===n&&(n=!0),e&&"object"!=typeof e)throw Error("Can not observe ".concat(typeof e," type."));return function(e){var r=jt.get(e)||e,i=_n(r),o=function(e){var r=jt.get(e.target)||e.target,o=_n(r);(n&&i.contains(o)||i===o||i.targetRaw===r&&i.key===e.key)&&t(new bn(e,o))};return i&&wt(t)&&Yt.add(o),function(){Yt.delete(o)}}(e)}(this,(function(t){zi(e,t),function(e,t){Array.isArray(t.object)&&"length"===t.key||(Fn(e.values,t.object)||e.values===t.value)&&e.initialized&&e.notify(li.ON_FORM_VALUES_CHANGE)}(e,t)}),!0))},Object.defineProperty(e.prototype,"valid",{get:function(){return!this.invalid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return this.errors.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this.queryFeedbacks({type:"error"})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"warnings",{get:function(){return this.queryFeedbacks({type:"warning"})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"successes",{get:function(){return this.queryFeedbacks({type:"success"})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lifecycles",{get:function(){return go(this,this.props.effects)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return"hidden"===this.display},set:function(e){S(e)&&(this.display=e?"hidden":"visible")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return"visible"===this.display},set:function(e){S(e)&&(this.display=e?"visible":"none")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return"editable"===this.pattern},set:function(e){S(e)&&(this.pattern=e?"editable":"readPretty")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readOnly",{get:function(){return"readOnly"===this.pattern},set:function(e){S(e)&&(this.pattern=e?"readOnly":"editable")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return"disabled"===this.pattern},set:function(e){S(e)&&(this.pattern=e?"disabled":"editable")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readPretty",{get:function(){return"readPretty"===this.pattern},set:function(e){S(e)&&(this.pattern=e?"readPretty":"editable")},enumerable:!1,configurable:!0}),e}();function Fo(e){return vo(e,(function(e){return function(t){Jn((function(){t(e)}))}}))}function wo(e){return vo(e,(function(e,t){return function(n,r){pt.parse(n).matchAliasGroup(e.address,e.path)&&Jn((function(){r(e,t)}))}}))}Fo(li.ON_FORM_INIT),Fo(li.ON_FORM_MOUNT),Fo(li.ON_FORM_UNMOUNT),Fo(li.ON_FORM_VALUES_CHANGE),Fo(li.ON_FORM_INITIAL_VALUES_CHANGE),Fo(li.ON_FORM_INPUT_CHANGE),Fo(li.ON_FORM_SUBMIT),Fo(li.ON_FORM_RESET),Fo(li.ON_FORM_SUBMIT_START),Fo(li.ON_FORM_SUBMIT_END),Fo(li.ON_FORM_SUBMIT_SUCCESS),Fo(li.ON_FORM_SUBMIT_FAILED),Fo(li.ON_FORM_SUBMIT_VALIDATE_START),Fo(li.ON_FORM_SUBMIT_VALIDATE_SUCCESS),Fo(li.ON_FORM_SUBMIT_VALIDATE_FAILED),Fo(li.ON_FORM_SUBMIT_VALIDATE_END),Fo(li.ON_FORM_VALIDATE_START),Fo(li.ON_FORM_VALIDATE_SUCCESS),Fo(li.ON_FORM_VALIDATE_FAILED),Fo(li.ON_FORM_VALIDATE_END),Fo(li.ON_FORM_GRAPH_CHANGE),Fo(li.ON_FORM_LOADING);var Mo=wo(li.ON_FIELD_INIT),ko=wo(li.ON_FIELD_MOUNT),Lo=wo(li.ON_FIELD_UNMOUNT),Do=wo(li.ON_FIELD_VALUE_CHANGE),Vo=wo(li.ON_FIELD_INITIAL_VALUE_CHANGE),Ro=wo(li.ON_FIELD_INPUT_VALUE_CHANGE),jo=wo(li.ON_FIELD_VALIDATE_START),Co=wo(li.ON_FIELD_VALIDATE_END);wo(li.ON_FIELD_VALIDATING);var Uo=wo(li.ON_FIELD_VALIDATE_FAILED),qo=wo(li.ON_FIELD_VALIDATE_SUCCESS);wo(li.ON_FIELD_SUBMIT),wo(li.ON_FIELD_SUBMIT_START),wo(li.ON_FIELD_SUBMIT_END),wo(li.ON_FIELD_SUBMIT_VALIDATE_START),wo(li.ON_FIELD_SUBMIT_VALIDATE_END),wo(li.ON_FIELD_SUBMIT_SUCCESS),wo(li.ON_FIELD_SUBMIT_FAILED),wo(li.ON_FIELD_SUBMIT_VALIDATE_SUCCESS),wo(li.ON_FIELD_SUBMIT_VALIDATE_FAILED),wo(li.ON_FIELD_RESET),wo(li.ON_FIELD_LOADING);var Go={onFieldInit:function(e,t){var n=yo();0===n.query(e).reduce((function(e,r){return t(r,n),e+1}),0)&&Mo(e,t)},onFieldMount:ko,onFieldUnmount:Lo,onFieldValueChange:Do,onFieldInputValueChange:Ro,onFieldInitialValueChange:Vo,onFieldValidateStart:jo,onFieldValidateEnd:Co,onFieldValidateFailed:Uo,onFieldValidateSuccess:qo},Bo=["onFieldInit","onFieldValueChange"],zo=function(e,t,n){var r=N(String(t).split(/\s*#\s*/),2),i=r[0],o=r[1];return e.query(i).getIn(o||n||"value")},$o=function(e,t){void 0===t&&(t=!1);var n=e||{},r=n.request,i=n.target,o=n.runner,a=n.field,u=n.scope;r&&(i?(r.state&&a.form.setFieldState(i,(function(e){return Pr(e,r.state,_t(u,{$target:e}))})),r.schema&&a.form.setFieldState(i,(function(e){return Ar(e,r.schema,_t(u,{$target:e}),t)})),s(o)&&o&&a.form.setFieldState(i,(function(e){Er("{{function(){".concat(o,"}}}"),_t(u,{$target:e}))()}))):(r.state&&a.setState((function(e){return Pr(e,r.state,u)})),r.schema&&a.setState((function(e){return Ar(e,r.schema,u,t)})),s(o)&&o&&Er("{{function(){".concat(o,"}}}"),u)()))},Wo=function(e,t){void 0===t&&(t={});var n=lr.effect,r=lr.memo,i=e,o=e.form,a=e.form.values;return _t(t.scope,{$form:o,$self:i,$observable:function(e,t){return lr.memo((function(){return sr(e)}),t)},$effect:n,$memo:r,$props:function(t){return e.setComponentProps(t)},$values:a})},Ho=function(e,t){return function(n){$o({field:n,request:{schema:e},scope:Wo(n,t)},!0)}},Jo=function(e,t){return f(e["x-reactions"]).map((function(e){return function(n){var r=Wo(n,t),u=Er(e,r);if(u){if(i(u))return u(n,r);var c=u.when,l=u.fulfill,f=u.otherwise,h=u.target,v=u.effects,m=function(){var e=function(e,t){if(o(t)){var n=[];return t.forEach((function(t){s(t)?n.push(zo(e,t)):a(t)&&t.name&&t.source&&(n[t.name]=zo(e,t.source,t.property))})),n}return a(t)?d(t,(function(t,n,r){return t[r]=zo(e,n),t}),{}):[]}(n,u.dependencies),t=_t(r,{$target:null,$deps:e,$dependencies:e}),i=Er(c,t),p=!c||i,v=p?l:f,m=p?null==l?void 0:l.run:null==f?void 0:f.run;$o({field:n,target:h,request:v,runner:m,scope:t})};h&&(u.effects=(null==v?void 0:v.length)?v:Bo),u.effects?lr.memo((function(){Zn((function(){p(u.effects,(function(e){Go[e]&&Go[e](n.address,m)}))}))}),[]):m()}}}))},Ko=[],Zo={},Qo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.forEach((function(e){i(e)&&Ko.push(e)}))},Yo=function(e,t){e&&i(t)&&(Zo[e]=Zo[e]||[],Zo[e].push(t))},Xo=function(e){o(e)&&e.forEach((function(e){o(Zo[e])&&Zo[e].forEach((function(e){Qo(e)}))}))},ea=["card","block","grid-col","grid-row","grid","layout","step","tab","text-box"],ta={},na=function(e){if(s(e))return e.replace(/\$value/,"$self.value")},ra=function(e){var t;return S(e.editable)&&(e["x-editable"]=e["x-editable"]||e.editable,delete e.editable),S(e.visible)&&(e["x-visible"]=e["x-visible"]||e.visible,delete e.visible),S(e.display)&&(e["x-display"]=e["x-display"]||(e.display?"visible":"hidden"),delete e.display),S(e["x-props"])&&(e["x-decorator-props"]=e["x-decorator-props"]||e["x-props"],delete e.display),e["x-linkages"]&&(e["x-reactions"]=f(e["x-reactions"]).concat((t=e["x-linkages"],o(t)?t.reduce((function(e,t){return t?"value:visible"===t.type?e.concat({target:t.target,when:na(t.condition),fulfill:{state:{visible:!0}},otherwise:{state:{visible:!1}}}):"value:schema"===t.type?e.concat({target:t.target,when:na(t.condition),fulfill:{schema:ra(A({version:"1.0"},t.schema))},otherwise:{schema:ra(A({version:"1.0"},t.otherwise))}}):"value:state"===t.type?e.concat({target:t.target,when:na(t.condition),fulfill:{state:t.state},otherwise:{state:t.otherwise}}):void 0:e}),[]):[])),delete e["x-linkages"]),e["x-component"]?ea.some((function(t){return T(t)===T(e["x-component"])}))&&(e.type="void"):ta[e.type]&&(e["x-component"]=ta[e.type]),e["x-decorator"]||"void"===e.type||"object"===e.type||(e["x-decorator"]=e["x-decorator"]||"FormItem"),e["x-rules"]&&(e["x-validator"]=[].concat(e["x-validator"]||[]).concat(e["x-rules"])),e};Yo("1.0",ra);var ia=function(e){ea.push.apply(ea,function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}([],N(e)))},oa=function(e){Object.assign(ta,e)},aa=function(){function e(t,n){var r=this;return this._isJSONSchemaObject=!0,this.version="2.0",this.addProperty=function(t,n){return r.properties=r.properties||{},r.properties[t]=new e(n,r),r.properties[t].name=t,r.properties[t]},this.removeProperty=function(e){var t=r.properties[e];return delete r.properties[e],t},this.setProperties=function(e){for(var t in e)r.addProperty(t,e[t]);return r},this.addPatternProperty=function(t,n){if(n)return r.patternProperties=r.patternProperties||{},r.patternProperties[t]=new e(n,r),r.patternProperties[t].name=t,r.patternProperties[t]},this.removePatternProperty=function(e){var t=r.patternProperties[e];return delete r.patternProperties[e],t},this.setPatternProperties=function(e){if(!e)return r;for(var t in e)r.addPatternProperty(t,e[t]);return r},this.setAdditionalProperties=function(t){if(t)return r.additionalProperties=new e(t),r.additionalProperties},this.setItems=function(t){if(t)return Array.isArray(t)?r.items=t.map((function(t){return new e(t,r)})):r.items=new e(t,r),r.items},this.setAdditionalItems=function(t){if(t)return r.additionalItems=new e(t,r),r.additionalItems},this.findDefinitions=function(e){if(e&&r.root&&s(e)&&0===e.indexOf("#/"))return pt.getIn(r.root,e.substring(2).split("/"))},this.mapProperties=function(t){return e.getOrderProperties(r).map((function(e,n){var r=e.schema,i=e.key;return t(r,i,n)}))},this.mapPatternProperties=function(t){return e.getOrderProperties(r,"patternProperties").map((function(e,n){var r=e.schema,i=e.key;return t(r,i,n)}))},this.reduceProperties=function(t,n){var i=n;return e.getOrderProperties(r,"properties").forEach((function(e,n){var r=e.schema,o=e.key;i=t(i,r,o,n)})),i},this.reducePatternProperties=function(t,n){var i=n;return e.getOrderProperties(r,"patternProperties").forEach((function(e,n){var r=e.schema,o=e.key;i=t(i,r,o,n)})),i},this.compile=function(t){var n=new e({},r.parent);return p(r,(function(e,r){i(e)&&!r.includes("x-")||"parent"!==r&&"root"!==r&&(n[r]=hr[r]?e?Er(e,t):e:e?Sr(e,t):e)})),n},this.fromJSON=function(t){return t?e.isSchemaInstance(t)?t:(p((n=t,Ko.reduce((function(e,t){return t(e)}),A({},n))),(function(e,t){i(e)&&!t.includes("x-")||("properties"===t?r.setProperties(e):"patternProperties"===t?r.setPatternProperties(e):"additionalProperties"===t?r.setAdditionalProperties(e):"items"===t?r.setItems(e):"additionalItems"===t?r.setAdditionalItems(e):"$ref"===t?r.fromJSON(r.findDefinitions(e)):r[t]=e)})),r):r;var n},this.toJSON=function(e){void 0===e&&(e=!0);var t={};return p(r,(function(n,r){var a,u,c,l,f,d;if((!i(n)||r.includes("x-"))&&"parent"!==r&&"root"!==r)if("properties"===r||"patternProperties"===r){if(!e)return;t[r]=(l=function(e){var t;return null===(t=null==e?void 0:e.toJSON)||void 0===t?void 0:t.call(e)},d=o(c=n)||s(c)?[]:{},p(c,(function(e,t){var n=l(e,t);o(d)?d.push(n):d[t]=n}),f),d)}else if("additionalProperties"===r||"additionalItems"===r){if(!e)return;t[r]=null===(a=null==n?void 0:n.toJSON)||void 0===a?void 0:a.call(n)}else if("items"===r){if(!e)return;Array.isArray(n)?t[r]=n.map((function(e){var t;return null===(t=null==e?void 0:e.toJSON)||void 0===t?void 0:t.call(e)})):t[r]=null===(u=null==n?void 0:n.toJSON)||void 0===u?void 0:u.call(n)}else t[r]=n})),t},this.toFieldProps=function(e){return function(e,t){return{name:e.name,reactions:[Ho(e,t)].concat(Jo(e,t))}}(r,e)},n?(this.parent=n,this.root=n.root):this.root=this,this.fromJSON(t)}return e.getOrderProperties=function(e,t){void 0===e&&(e={}),void 0===t&&(t="properties");var n=[],r=[];for(var i in e[t]){var o=e[t][i],a=o["x-index"];isNaN(a)?r.push({schema:o,key:i}):n[a]={schema:o,key:i}}return n.concat(r).filter((function(e){return!!e}))},e.compile=function(e,t){return Sr(e,t)},e.shallowCompile=function(e,t){return Er(e,t)},e.isSchemaInstance=function(t){return v(t,e)},e.registerCompiler=Ir,e.registerPatches=Qo,e.registerVoidComponents=ia,e.registerTypeDefaultComponents=oa,e.registerPolyfills=Yo,e.enablePolyfills=Xo,e.silent=xr,e}();function sa(e,t,n,r){var i=new aa(t),o=i.toFieldProps();function a(t){i.mapProperties((function(n,r){sa(e,n,t,r)}))}if(null!=r)if("object"===t.type)a(e.createObjectField(A(A({},o),{name:r,basePath:n})).address.toString());else if("array"===t.type){var s=e.createArrayField(A(A({},o),{name:r,basePath:n})).address.toString();e.getValuesIn(s).forEach((function(n,r){if(t.items){var i=Array.isArray(t.items)?t.items[r]||t.items[0]:t.items;sa(e,i,s,r)}}))}else if("void"===t.type){a(e.createVoidField(A(A({},o),{name:r,basePath:n})).address.toString())}else e.createField(A(A({},o),{name:r,basePath:n}));else a(n)}e.Schema=aa,e.validateOnServer=function(e,t){var n=new To({values:t});return sa(n,e),n.validate()},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=formily.json-schema.umd.production.js.map
